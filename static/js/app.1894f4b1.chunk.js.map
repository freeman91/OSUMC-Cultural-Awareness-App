{"version":3,"sources":["frontend/views/Culture/style.ts","frontend/views/Culture/EditFab.tsx","frontend/views/Culture/InsightCard.tsx","frontend/views/Culture/Insights.tsx","frontend/views/Culture/ToolsFAB.tsx","frontend/lib/api.ts","frontend/lib/ledger.ts","frontend/lib/feedback.ts","frontend/lib/admin.ts","frontend/lib/culture.ts","frontend/views/Culture/Culture.tsx","frontend/views/Culture/index.ts","frontend/redux/UserReducer.ts","frontend/redux/UserAction.ts","frontend/redux/ThemeAction.ts","frontend/redux/index.ts","frontend/redux/ThemeReducer.ts","frontend/views/Login/validation.ts","frontend/views/Login/Login.tsx","frontend/views/Login/index.ts","frontend/views/Register/explanationText.ts","frontend/views/Register/validation.ts","frontend/views/Register/Register.tsx","frontend/views/Register/index.ts","frontend/constants.ts","frontend/views/Home/styles.ts","frontend/views/Home/Cultures.tsx","frontend/views/Home/Admins.tsx","frontend/views/Home/Home.tsx","frontend/views/Home/index.ts","frontend/views/EditInsight/EditInsight.tsx","frontend/views/EditInsight/index.ts","frontend/views/Recovery/validation.ts","frontend/views/Recovery/Recovery.tsx","frontend/views/Recovery/index.ts","frontend/theme.ts","frontend/views/Settings/ThemeToggler.tsx","frontend/views/Settings/DownloadedCultures.tsx","frontend/views/Settings/Feedback.tsx","frontend/views/Settings/Settings.tsx","frontend/views/Settings/index.ts","frontend/views/Header.tsx","frontend/routes.ts","frontend/App.tsx"],"names":["StyleSheet","create","spinner","top","position","specialAddInsight","padding","marginVertical","marginHorizontal","card","fab","EditFAB","props","window","useWindowDimensions","safeArea","useSafeAreaInsets","styles","Styles","Platform","OS","height","bottom","FAB","Group","style","icon","open","onPress","visible","actions","onStateChange","InsightCard","insight","index","editing","useState","showMenu","setShowMenu","link","source","data","Card","Content","Title","summary","Paragraph","information","Actions","Linking","canOpenURL","Menu","onDismiss","anchor","IconButton","size","Item","title","Clipboard","setString","Divider","openURL","onDelete","Insights","insights","onRefresh","renderItem","refreshing","setRefreshing","ActivityIndicator","animating","refresh","SafeAreaView","FlatList","keyExtractor","_","toString","ToolsFAB","setOpen","onAdd","onSave","ApiError","reason","statusCode","Error","OfflineError","Api","endpoint","fetch","API_URL","encodeURI","method","headers","Accept","response","json","ok","status","token","Authorization","body","JSON","stringify","undefined","Admin","name","email","superUser","password","passwordConfirmation","put","this","password_confirmation","getAuth","post","res","delete","Culture","generalInsights","specializedInsights","modified","general_insights","specialized_insights","culture","get","Map","Object","entries","list","a","async","AsyncStorage","getItem","ledger","parse","saveLedger","cultures","forEach","val","key","setItem","add","info","compressed","Pako","to","set","updatedCultures","has","storedData","removeItem","Ledger","Feedback","feedback","Tab","createMaterialTopTabNavigator","ExampleInsight","type","connect","state","ownProps","user","navigation","route","cultureName","params","setCulture","setEditing","msg","setMsg","banner","setBanner","dirty","setDirty","useRoute","useEffect","setOptions","fetchCulture","React","addListener","e","preventDefault","confirm","dispatch","action","Alert","alert","text","cancelable","setCultureInPlace","newCulture","read","console","error","Date","now","navigate","hideSnackbar","deleteInsight","Array","i","splice","length","InsightCardView","View","Banner","label","Navigator","initialRouteName","Screen","row","item","from","Accordion","id","map","Button","mode","update","setParams","prevName","getFocusedRouteNameFromRoute","push","Portal","Snackbar","USER_INITIAL_STATE","updateUser","payload","resetUser","updateTheme","theme","Reducer","combineReducers","Yup","shape","required","initialValues","view","flex","justifyContent","margin","overflow","recover","Login","bindActionCreators","remember","setRemember","obscurePass","SetObscurePass","useRef","useFormik","validationSchema","Validation","onSubmit","values","login","handleChange","handleBlur","errors","touched","handleSubmit","setFieldValue","validateField","getEmail","fields","CommonActions","reset","routes","TextInput","autoFocus","textContentType","left","Icon","ref","value","onBlur","onChangeText","HelperText","secureTextEntry","right","Checkbox","uppercase","min","max","matches","oneOf","color","fontWeight","Register","obscurePassConf","SetObscurePassConf","focused","setFocused","register","DisplayErrOrHelp","fieldName","RegisterHelpText","onFocus","Text","inviteModal","backgroundColor","Cultures","flexDirection","Admins","admins","log","onEdit","Home","setCultures","setAdmins","setInviteModal","fetchCultures","cultureNames","fetchAdmins","fabStyles","Modal","input","paddingHorizontal","EditInsight","isSpecialized","category","setTitle","setSummary","setInfo","srcData","setSrcData","srcType","setSrcType","setCultureName","placeholder","numberOfLines","multiline","RadioButton","onValueChange","newInsight","specialized","alignSelf","Recovery","updateAccount","updatePassword","lightTheme","DefaultTheme","roundness","colors","primary","accent","darkTheme","DarkTheme","getTheme","newTheme","leftIcon","DownloadedCultures","expanded","setExpanded","setLedger","fetchLedger","timer","setInterval","clearInterval","ledgerArray","description","dayjs","unix","remove","onUpdateFinish","extend","relativeTime","characterCounter","fontSize","paddingRight","paddingBottom","button","setFeedback","setState","FeedbackSender","send","rightIcon","Settings","openLink","err","HeaderButton","menu","setMenu","headerRight","prefixes","config","screens","path","decodeURI","general","store","createStore","NavigatorScreen","Stack","createStackNavigator","NavigationContainer","linking","component","options","Header","registerRootComponent"],"mappings":"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","file":"static/js/app.1894f4b1.chunk.js","sourcesContent":["import { StyleSheet } from \"react-native\";\n\nexport default StyleSheet.create({\n  spinner: { top: \"50%\", position: \"relative\" },\n\n  specialAddInsight: {\n    padding: 10,\n    marginVertical: 5,\n    marginHorizontal: 5,\n  },\n\n  card: {\n    padding: 10,\n    marginVertical: 5,\n    marginHorizontal: 5,\n  },\n\n  fab: {\n    // TODO: Emulate Fixed for the Floating Action Button\n  },\n});\n","import React from \"react\";\nimport { Platform, useWindowDimensions } from \"react-native\";\n\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\n\nimport { FAB } from \"react-native-paper\";\n\nimport Styles from \"./style\";\n\n/**\n * Properties for {@link EditFAB}\n */\ntype EditFABProps = {\n  // onPress handles when the FAB is pressed.\n  onPress: () => void;\n};\n\n/**\n * EditFAB displays a {@link FAB} that is labeled \"edit\" and has a pencil icon.\n *\n * @param {EditFABProps} props\n * @returns {React.ReactElement} React component\n */\nexport default function EditFAB(props: EditFABProps): React.ReactElement {\n  const window = useWindowDimensions();\n  const safeArea = useSafeAreaInsets();\n\n  // HACK: In order to get the FAB to be positioned properly on both Web and Mobile.\n  //\n  // Web: use position: fixed.\n  // Mobile: useWindowDimensions hook, this doesn't work on Web.\n  const styles = {\n    ...Styles.fab,\n    position: Platform.OS === \"web\" ? \"fixed\" : \"relative\",\n  };\n\n  if (Platform.OS !== \"web\") {\n    styles[\"top\"] = window.height - safeArea.bottom;\n  }\n\n  return (\n    <FAB.Group\n      style={styles as any}\n      icon=\"pencil\"\n      open={false}\n      onPress={() => props.onPress()}\n      visible={true}\n      actions={[]}\n      onStateChange={() => props.onPress()}\n    />\n  );\n}\n","import React, { useState } from \"react\";\n\n// Clipboard is deprecated, but necessary because of incompatibility with Expo\n// See https://github.com/react-native-clipboard/clipboard/issues/71#issuecomment-701138494\nimport { Linking, Clipboard } from \"react-native\";\n\nimport {\n  Card,\n  IconButton,\n  Divider,\n  Paragraph,\n  Title,\n  Menu,\n} from \"react-native-paper\";\n\nimport { GeneralInsight } from \"../../lib\";\n\nimport Styles from \"./style\";\n\n/**\n * Properties for {@link InsightCard}\n */\ntype InsightCardProps = {\n  key: string;\n  // Insight to display on card\n  insight: GeneralInsight;\n  // editing whether the admin is editing the current page\n  editing: boolean;\n  // index in the list of General or Specialized lists\n  index: number | [string, number];\n  // callback to be used when an insight is deleted\n  onDelete: (index: number | [string, number]) => void;\n  // callback to be used when an insight is pressed\n  onPress: (index: number | [string, number]) => void;\n};\n\n/**\n * InsightCard card to display information about an Insight\n *\n * @param {InsightCardProps} props\n * @returns {React.ReactElement} React component\n */\nexport default function InsightCard(\n  props: InsightCardProps\n): React.ReactElement {\n  const { insight, index, editing, onPress } = props;\n  const [showMenu, setShowMenu] = useState(false);\n  const link = insight.source.data;\n\n  return (\n    <Card style={Styles.card} onPress={() => editing && onPress(index)}>\n      <Card.Content>\n        <Title>{insight.summary}</Title>\n        <Paragraph>{insight.information}</Paragraph>\n      </Card.Content>\n      <Card.Actions>\n        {link && Linking.canOpenURL(link) && (\n          <Menu\n            visible={showMenu}\n            onDismiss={() => setShowMenu(false)}\n            anchor={\n              <IconButton\n                icon=\"link\"\n                size={20}\n                onPress={() => setShowMenu(true)}\n              />\n            }\n          >\n            <Menu.Item\n              title=\"Copy link\"\n              onPress={() => Clipboard.setString(link)}\n            />\n            <Divider />\n            <Menu.Item\n              title=\"Open link\"\n              onPress={() => Linking.openURL(link)}\n            />\n          </Menu>\n        )}\n        {editing && (\n          <IconButton\n            icon=\"delete\"\n            size={20}\n            onPress={() => props.onDelete(index)}\n          />\n        )}\n      </Card.Actions>\n    </Card>\n  );\n}\n","import React, { useState } from \"react\";\nimport { FlatList, SafeAreaView } from \"react-native\";\n\nimport { ActivityIndicator } from \"react-native-paper\";\n\nimport { GeneralInsight } from \"../../lib\";\n\nimport Styles from \"./style\";\n\n/**\n * Properties for {@link Insights}\n */\ntype InsightProps = {\n  // callback called when the {@link FlatList} is refreshed\n  onRefresh: () => void;\n  // Insights to render\n  insights: [string, GeneralInsight[]][] | GeneralInsight[];\n  // how to render the insights\n  renderItem: ({ item: any }) => React.ReactElement;\n};\n\n/**\n * Component that displays a list of components of either {@link GeneralInsights}\n * or {{text: string, insights: GeneralInsight[]}[]}.\n *\n * @param {InsightProps} props\n * @returns {React.ReactElement} React component\n */\nexport default function Insights(props: InsightProps): React.ReactElement {\n  const { insights, onRefresh, renderItem } = props;\n  const [refreshing, setRefreshing] = useState(false);\n\n  if (!insights) {\n    return (\n      <ActivityIndicator animating={true} size=\"large\" style={Styles.spinner} />\n    );\n  }\n\n  const refresh = () => {\n    onRefresh();\n    setRefreshing(true);\n  };\n\n  return (\n    <SafeAreaView>\n      <FlatList\n        data={insights}\n        keyExtractor={(_, index) => index.toString()}\n        onRefresh={() => refresh()}\n        refreshing={refreshing}\n        renderItem={renderItem}\n      />\n    </SafeAreaView>\n  );\n}\n","import React, { useState } from \"react\";\nimport { Platform, useWindowDimensions } from \"react-native\";\n\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\n\nimport { FAB } from \"react-native-paper\";\n\nimport Styles from \"./style\";\n\n/**\n * Properties for {@link ToolsFAB}\n */\ntype ToolsFABProps = {\n  // onSave function called when hitting the \"save\" button. This button should\n  // toggle the whether this FAB is being displayed.\n  onSave: () => void;\n  // onAdd function called when hitting the \"add\" button.\n  onAdd: () => void;\n};\n\n/**\n * ToolsFAB displays a {@link FAB.Group} that has two sub {@link FAB} one for editing and one for saving.\n *\n * @param {ToolsFABProps} props\n * @returns {React.ReactElement} React component\n */\nexport default function ToolsFAB(props: ToolsFABProps): React.ReactElement {\n  const [open, setOpen] = useState(false);\n  const window = useWindowDimensions();\n  const safeArea = useSafeAreaInsets();\n\n  // HACK: In order to get the FAB to be positioned properly on both Web and Mobile.\n  //\n  // Web: use position: fixed.\n  // Mobile: useWindowDimensions hook, this doesn't work on Web.\n  let styles = {\n    ...Styles.fab,\n    position: Platform.OS === \"web\" ? \"fixed\" : \"relative\",\n  };\n\n  if (Platform.OS !== \"web\") {\n    styles[\"top\"] = window.height - safeArea.bottom;\n  }\n\n  return (\n    <FAB.Group\n      visible={true}\n      style={styles as any}\n      open={open}\n      icon={open ? \"close\" : \"wrench\"}\n      actions={[\n        { icon: \"plus\", onPress: () => props.onAdd() },\n        { icon: \"content-save\", onPress: () => props.onSave() },\n      ]}\n      onStateChange={() => setOpen(!open)}\n    />\n  );\n}\n","import { API_URL } from \"../../env.json\";\n\n/**\n * An ApiError returned from an {@link Api} method.\n */\nexport class ApiError extends Error {\n  /**\n   * constructor for ApiError.\n   *\n   * @param {string} reason\n   * @param {number} statusCode\n   */\n  constructor(public reason: string, public statusCode: number) {\n    super(reason);\n  }\n}\n\n/**\n * An OfflineError returned from an {@link Api} method.\n */\nexport class OfflineError extends Error {\n  /**\n   * constructor for OfflineError\n   */\n  constructor(public reason: string) {\n    super(`Offline: ${reason}`);\n  }\n}\n\n/**\n * @internal\n */\nexport class Api {\n  /**\n   * Perform a GET request on the API.\n   *\n   * @throws {@link ApiError}\n   * @throws {@link OfflineError}\n   *\n   * @param {string} endpoint  after `http://localhost:5000/v1/`\n   *\n   * @returns {Promise<any>} JSON\n   */\n  static async get(endpoint: string): Promise<any> {\n    let response: Response;\n    try {\n      response = await fetch(`${API_URL}${encodeURI(endpoint)}`, {\n        method: \"GET\",\n        headers: { Accept: \"application/json\" },\n      });\n    } catch (err) {\n      throw new OfflineError(err);\n    }\n\n    let json = await response.json();\n    if (!response.ok) {\n      throw new ApiError(json[\"msg\"], response.status);\n    }\n\n    return json;\n  }\n\n  /**\n   * Perform a GET request on the API with authorization.\n   *\n   * @throws {@link ApiError}\n   * @throws {@link OfflineError}\n   *\n   * @param {string} endpoint  after `http://localhost:5000/v1/`\n   * @param {string} token  JSON Web Token\n   * @returns {Promise<any>} JSON\n   */\n  static async getAuth(endpoint: string, token: string): Promise<any> {\n    let response: Response;\n    try {\n      response = await fetch(`${API_URL}${encodeURI(endpoint)}`, {\n        method: \"GET\",\n        headers: {\n          Accept: \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n      });\n    } catch (err) {\n      throw new OfflineError(err);\n    }\n\n    let json = await response.json();\n    if (!response.ok) {\n      throw new ApiError(json[\"msg\"], response.status);\n    }\n\n    return json;\n  }\n\n  /**\n   * Perform a PUT request on the API.\n   *\n   * @throws {@link ApiError}\n   * @throws {@link OfflineError}\n   *\n   * @param {string} endpoint  after `http://localhost:5000/v1/`\n   * @param {Object} body  JSON payload\n   * @param {string} token  JSON Web Token\n   * @returns {Promise<any>} JSON\n   */\n  static async put(endpoint: string, body: {}, token: string): Promise<any> {\n    let response: Response;\n    try {\n      response = await fetch(`${API_URL}${encodeURI(endpoint)}`, {\n        method: \"PUT\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(body),\n      });\n    } catch (err) {\n      throw new OfflineError(err);\n    }\n\n    let json = await response.json();\n    if (!response.ok) {\n      throw new ApiError(json[\"msg\"], response.status);\n    }\n\n    return json;\n  }\n\n  /**\n   * Perform a DELETE request on the API.\n   *\n   * @throws {@link ApiError}\n   * @throws {@link OfflineError}\n   *\n   * @param {string} endpoint  after `http://localhost:5000/v1/`\n   * @param {string} token  JSON Web Token\n   * @returns {Promise<any>} JSON\n   */\n  static async delete(endpoint: string, token: string): Promise<any> {\n    let response: Response;\n    try {\n      response = await fetch(`${API_URL}${encodeURI(endpoint)}`, {\n        method: \"DELETE\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n      });\n    } catch (err) {\n      new OfflineError(err);\n    }\n\n    let json = await response.json();\n    if (!response.ok) {\n      throw new ApiError(json[\"msg\"], response.status);\n    }\n\n    return json;\n  }\n\n  /**\n   * Perform a POST request on the API.\n   *\n   * @throws {@link ApiError}\n   * @throws {@link OfflineError}\n   *\n   * @param {string} endpoint  after `http://localhost:5000/v1/`\n   * @param {Object} body  Request Body\n   * @param {string} auth  JSON Web Token\n   * @returns {Promise<any>} JSON\n   */\n  static async post(endpoint: string, body: {}, token?: string): Promise<any> {\n    let headers = {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n    };\n\n    if (token !== undefined) {\n      headers[\"Authorization\"] = `Bearer ${token}`;\n    }\n\n    let response: Response;\n    try {\n      response = await fetch(`${API_URL}${encodeURI(endpoint)}`, {\n        method: \"POST\",\n        headers: headers,\n        body: JSON.stringify(body),\n      });\n    } catch (err) {\n      throw new OfflineError(err);\n    }\n\n    let json = await response.json();\n    if (!response.ok) {\n      throw new ApiError(json[\"msg\"], response.status);\n    }\n\n    return json;\n  }\n}\n","import AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport * as Pako from \"pako\";\n\nimport { Culture } from \"./culture\";\n\n/**\n * Ledger - a JavaScript Object that stores all downloaded cultures and\n * the times they were last modified.\n *\n * The Ledger has many methods to modify, update, and remove culture's information\n * from storage.\n *\n * @remark\n * All methods will throw errors of many different types and should all be\n * reported to the User.\n *\n * {@link add} Add a Culture\n * {@link remove} Remove a Culture\n * {@link update} Update all Cultures\n * {@link list} List all Cultures in a Map<string, number>\n * {@link read} Read a {@link Culture} from storage\n */\nexport namespace Ledger {\n  const LOCATION: string = \"@ledger\";\n\n  /**\n   * Updates all stored culture's information if they're out of date.\n   *\n   * @remarks\n   * This operation is really expensive.\n   *\n   * @throws {@link ApiError}\n   * @throws {@link OfflineError}\n   *\n   * @throws network errors from {@link fetch}\n   * @throws zlib errors from {@link Pako}\n   * @throws storage failures from {@link AsyncStorage}\n   * @throws JSON errors from {@link JSON}\n   */\n  export async function update() {\n    const updatedCultures = await Culture.list();\n    let cultures = await list();\n\n    updatedCultures.forEach(\n      async (culture: { name: string; modified: number }) => {\n        const { name, modified } = culture;\n        if (cultures.has(name) && cultures.get(name) < modified) {\n          add(name);\n        }\n      }\n    );\n  }\n\n  /**\n   * List all downloaded cultures (keys) and their modified times (values)\n   * as a Map<string, number>.\n   *\n   * @throws storage failures from {@link AsyncStorage}\n   * @throws JSON errors from {@link JSON}\n   *\n   * @returns {Promise<Map<string, number>>}\n   */\n  export async function list(): Promise<Map<string, number>> {\n    const data = await AsyncStorage.getItem(LOCATION);\n    if (!data) {\n      return new Map();\n    }\n\n    let ledger = JSON.parse(data)[\"cultures\"];\n    return new Map(Object.entries(ledger));\n  }\n\n  /**\n   * Read a culture from {@link AsyncStorage}.\n   *\n   * @param {string} culture\n   *\n   * @throws JSON errors from {@link JSON}\n   * @throws storage failures from {@link AsyncStorage}\n   * @throw pako errors from {@link Pako}\n   *\n   * @returns {Promise<Culture>} culture read\n   */\n  export async function read(culture: string): Promise<Culture> {\n    const storedData = await AsyncStorage.getItem(culture);\n    if (!storedData) {\n      throw new Error(`${culture}: culture download not found`);\n    }\n\n    const data: string = Pako.inflate(storedData, { to: \"string\" });\n    return JSON.parse(data);\n  }\n\n  /**\n   * saveLedger save the ledger to storage\n   *\n   * @param {Map} cultures to save\n   */\n  function saveLedger(cultures: Map<string, number>) {\n    let ledger = { cultures: {} };\n    cultures.forEach((val, key) => (ledger.cultures[key] = val));\n\n    AsyncStorage.setItem(LOCATION, JSON.stringify(ledger));\n  }\n\n  /**\n   * Add a culture to {@link AsyncStorage}\n   *\n   * @param {string} culture\n   *\n   *\n   * @throws {@link ApiError}\n   * @throws {@link OfflineError}\n   * @throws JSON errors from {@link JSON}\n   * @throws storage failures from {@link AsyncStorage}\n   * @throw pako errors from {@link Pako}\n   */\n  export async function add(culture: string) {\n    const info = await Culture.get(culture);\n    const compressed = Pako.deflate(JSON.stringify(info), { to: \"string\" });\n    AsyncStorage.setItem(culture, compressed.toString());\n\n    let cultures = await list();\n    cultures.set(culture, info.modified);\n    saveLedger(cultures);\n  }\n\n  /**\n   * Remove a culture from {@link AsyncStorage}\n   *\n   * @remark\n   * Only removes a culture if it exists in the Ledger\n   *\n   * @param {string} culture to remove\n   */\n  export async function remove(culture: string) {\n    let cultures = await list();\n\n    if (cultures.has(culture)) {\n      AsyncStorage.removeItem(culture);\n    }\n\n    cultures.delete(culture);\n    saveLedger(cultures);\n  }\n}\n","import { Api } from \"./api\";\n\nexport namespace Feedback {\n  /**\n   * send feedback to owner.\n   *\n   * @throws {@link ApiError}\n   * @throws {@link OfflineError}\n   *\n   * @param {string} feedback - to send\n   * @returns {Promise<void>}\n   */\n  export async function send(feedback: string): Promise<void> {\n    await Api.post(\"/feedback\", { feedback: feedback });\n  }\n}\n","import { Api } from \"./api\";\n\n/**\n * Payload returned by {@link Admin.login} and {@link Admin.create}\n */\nexport type AuthPayload = {\n  user: Admin;\n  token: string;\n};\n\n/**\n * Administrator wrapper around fetch for interacting with API.\n */\nexport class Admin {\n  /**\n   * constructor for {@link Admin}.\n   *\n   * @throws EmailColonError - Email cannot contain a `:`\n   *\n   * @param {string} name\n   * @param {string} email\n   * @param {boolean} superUser\n   */\n  constructor(\n    public name: string,\n    public email: string,\n    public superUser: boolean = false\n  ) {}\n\n  /**\n   * get an {@link Admin} data.\n   *\n   * @param {string} token\n   * @param {string} email\n   * @returns {Promise<string[]>}\n   */\n  static async get(email: string, token: string): Promise<Admin> {\n    let json = await Api.getAuth(`/admins/${email}`, token);\n    return json;\n  }\n\n  /**\n   * login an {@link Admin}.\n   *\n   * @throws {@link ApiError}\n   * @throws {@link OfflineError}\n   *\n   * @param {string} email - email of Admin\n   * @param {string} password - password of Admin\n   * @returns {Promise<AuthPayload>} JWT token and Admin user information\n   */\n  static async login(email: string, password: string): Promise<AuthPayload> {\n    const json = await Api.post(\"/login\", { email: email, password: password });\n    return json;\n  }\n\n  /**\n   * list all {@link Admin} by name.\n   *\n   * @throws {@link ApiError}\n   * @throws {@link OfflineError}\n   *\n   * @param {string} token\n   * @returns {Promise<string[]>}\n   */\n  static async list(token: string): Promise<string[]> {\n    let json = await Api.getAuth(\"/admins\", token);\n    return json[\"admins\"];\n  }\n\n  /**\n   * invite an {@link Admin}.\n   *\n   * @throws {@link ApiError}\n   * @throws {@link OfflineError}\n   *\n   * @param {string} email - of future admin to invite\n   * @param {string} token - JSON Web Token\n   * @returns {Promise<void>}\n   */\n  static async invite(email: string, token: string): Promise<void> {\n    await Api.post(\"/admins/invite\", { email: email }, token);\n  }\n\n  /**\n   * update an {@link Admin}.\n   *\n   * @throws {@link ApiError}\n   * @throws {@link OfflineError}\n   *\n   * @param {string} password - validate password\n   * @param {string} passwordConfirmation - MUST match passwordConfirmation\n   * @param {string} token - JSON Web Token\n   * @returns {Promise<void>}\n   */\n  async update(\n    password: string,\n    passwordConfirmation: string,\n    token: string\n  ): Promise<void> {\n    await Api.put(\n      `/admins/${this.email}`,\n      {\n        email: this.email,\n        name: this.name,\n        password: password,\n        password_confirmation: passwordConfirmation,\n      },\n      token\n    );\n  }\n\n  /**\n   * update an {@link Admin} only allowing them to update\n   * their password.\n   *\n   * @throws {@link ApiError}\n   * @throws {@link OfflineError}\n   *\n   * @param {string} email - email of admin\n   * @param {string} password - validate password\n   * @param {string} passwordConfirmation - MUST match passwordConfirmation\n   * @param {string} token - JSON Web Token\n   * @returns {Promise<void>}\n   */\n  static async updatePassword(\n    email: string,\n    password: string,\n    passwordConfirmation: string,\n    token: string\n  ): Promise<void> {\n    await Api.put(\n      `/admins/${email}`,\n      {\n        email: email,\n        password: password,\n        password_confirmation: passwordConfirmation,\n      },\n      token\n    );\n  }\n\n  /**\n   * recover an {@link Admin} with their email.\n   *\n   * @throws {@link ApiError}\n   * @throws {@link OfflineError}\n   *\n   * @param {string} email - email of admin to recover\n   *\n   * @returns {Promise<string>} server response\n   */\n  static async recover(email: string): Promise<string> {\n    const res = await Api.post(\"/admins/recover\", { email: email });\n    return res[\"msg\"];\n  }\n\n  /**\n   * delete an {@link Admin}.\n   *\n   * @throws {@link ApiError}\n   * @throws {@link OfflineError}\n   *\n   * @param {string} email - of Admin to delete\n   * @param {string} token - JSON Web Token\n   * @returns {Promise<void>}\n   */\n  static async delete(email: string, token: string): Promise<void> {\n    await Api.delete(`/admins/${email}`, token);\n  }\n\n  /**\n   * create an {@link Admin}.\n   *\n   * @throws {@link ApiError}\n   * @throws {@link OfflineError}\n   *\n   * @param {string} password - password validation\n   * @param {string} passwordConfirmation - MUST match password\n   * @param {string} token - JSON Web Token\n   * @returns {Promise<AuthPayload>} contains JSON Web Token and user information\n   */\n  static async create(\n    name: string,\n    email: string,\n    password: string,\n    passwordConfirmation: string,\n    token: string\n  ): Promise<AuthPayload> {\n    const json = await Api.post(\n      \"/register\",\n      {\n        name: name,\n        email: email,\n        password: password,\n        password_confirmation: passwordConfirmation,\n      },\n      token\n    );\n\n    return json;\n  }\n}\n","import { Api } from \"./api\";\n\n/**\n * Represents a GeneralInsight used by {@link Culture}.\n *\n * fields:\n *   source: string\n *   text: string\n */\nexport type GeneralInsight = {\n  summary: string;\n  information: string;\n  source: { data: string; type: string };\n};\n\n/**\n * Represents a SpecializedInsight used by {@link Culture}.\n * A Map<string, GeneralInsight>.\n */\nexport type SpecializedInsight = Map<string, GeneralInsight[]>;\n\n/**\n * A Wrapper around {@link Api} for Culture.\n */\nexport class Culture {\n  /**\n   * constructor for {@link Culture}.\n   *\n   * @param {string} name\n   * @param {GeneralInsight[]} generalInsights\n   * @param {SpecializedInsight} specializedInsights\n   * @param {number} modified Epoch timestamp\n   */\n  constructor(\n    public name: string,\n    public generalInsights: GeneralInsight[],\n    public specializedInsights: SpecializedInsight,\n    public modified: number\n  ) {}\n\n  /**\n   * Get information about a {@link Culture}.\n   *\n   * @throws {@link ApiError}\n   * @throws {@link OfflineError}\n   *\n   * @param {string} name\n   * @returns {Promise<Culture>}\n   */\n  static async get(culture: string): Promise<Culture> {\n    let json = await Api.get(`/cultures/${culture}`);\n\n    const { name, general_insights, specialized_insights, modified } = json;\n\n    return new this(\n      name,\n      general_insights,\n      new Map(Object.entries(specialized_insights)),\n      modified\n    );\n  }\n\n  /**\n   * List all cultures by name.\n   *\n   * @throws {@link ApiError}\n   * @throws {@link OfflineError}\n   *\n   * @returns {Promise<{ name: string; modified: number }[]>}\n   */\n  static async list(): Promise<{ name: string; modified: number }[]> {\n    let json = await Api.get(\"/cultures\");\n\n    return json[\"cultures\"];\n  }\n\n  /**\n   * Create a {@link Culture}\n   *\n   * @throws {@link ApiError}\n   * @throws {@link OfflineError}\n   *\n   * @param {string} token\n   * @returns {Promise<void>}\n   */\n  async create(token: string): Promise<void> {\n    await Api.post(\n      \"/culture\",\n      {\n        name: this.name,\n        general_insights: this.generalInsights,\n        specialized_insights: this.specializedInsights,\n      },\n      token\n    );\n  }\n\n  /**\n   * Delete a {@link Culture}\n   *\n   * @throws {@link ApiError}\n   * @throws {@link OfflineError}\n   *\n   * @param {string} token\n   * @returns {Promise<void>}\n   */\n  static async delete(name: string, token: string): Promise<void> {\n    await Api.delete(`/cultures/${name}`, token);\n  }\n\n  /**\n   * Update a {@link Culture}\n   *\n   * @throws {@link ApiError}\n   * @throws {@link OfflineError}\n   *\n   * @param {string} token\n   * @returns {Promise<void>}\n   */\n  async update(token: string): Promise<void> {\n    const data = {\n      general_insights: this.generalInsights,\n      specialized_insights: this.specializedInsights,\n      name: this.name,\n    };\n\n    await Api.put(`/cultures/${this.name}`, data, token);\n  }\n}\n","import React, { useState, useEffect } from \"react\";\nimport { View, Alert, Platform } from \"react-native\";\n\nimport {\n  getFocusedRouteNameFromRoute,\n  useRoute,\n} from \"@react-navigation/native\";\n\nimport { StackNavigationProp } from \"@react-navigation/stack\";\nimport { RouteProp } from \"@react-navigation/native\";\nimport { connect } from \"react-redux\";\nimport { createMaterialTopTabNavigator } from \"@react-navigation/material-top-tabs\";\nimport {\n  ActivityIndicator,\n  List,\n  Button,\n  Snackbar,\n  Portal,\n  Banner,\n} from \"react-native-paper\";\n\nimport EditFAB from \"./EditFab\";\nimport InsightCard from \"./InsightCard\";\nimport Insights from \"./Insights\";\nimport ToolsFAB from \"./ToolsFAB\";\nimport Styles from \"./style\";\n\nimport { Culture, GeneralInsight, SpecializedInsight, Ledger } from \"../../lib\";\n\nimport { Routes } from \"../../routes\";\nimport { Store } from \"../../redux\";\n\ntype Props = {\n  navigation: StackNavigationProp<Routes, \"Culture\">;\n  route: RouteProp<Routes, \"Culture\">;\n  token: string;\n};\n\ntype TabProps = {\n  general: { insights: GeneralInsight[] };\n  specialized: { insights: SpecializedInsight };\n};\n\nconst Tab = createMaterialTopTabNavigator<TabProps>();\n\nconst ExampleInsight = {\n  summary: \"summary\",\n  information: \"information\",\n  source: { data: \"www.example.com\", type: \"link\" },\n};\n\nconst adminNewCultureBanner = `Welcome to a brand new Culture!\n\n1. To add a new insight hit the tool button\n2. To edit an insight click on it\n3. Don't forget to save!\n`;\n\n/**\n * CultureView displays information about a specific culture. The name of the culture\n * to query the API for is specified in `props.route.params`.\n *\n * Admin:\n *   This route allows editing and creating insights about the particular culture.\n *\n * @param: props: properties to pass to CultureView\n *\n * @returns React Element\n */\nfunction CultureView(props: Props): React.ReactElement {\n  const cultureName = props.route.params ? props.route.params.cultureName : \"\";\n  const token = props.token || \"\";\n  const navigation = props.navigation;\n\n  let [culture, setCulture] = useState<Culture | null>(null);\n  const [editing, setEditing] = useState<boolean>(false);\n  const [msg, setMsg] = useState<string>(\"\");\n  const [banner, setBanner] = useState(false);\n  const [dirty, setDirty] = useState(props.route.params.dirty || false);\n  const route = useRoute();\n\n  useEffect(() => props.navigation.setOptions({ title: cultureName }), [\n    cultureName,\n  ]);\n  useEffect(() => {\n    fetchCulture();\n  }, []);\n\n  // Prevent leaving with unsaved changes\n  React.useEffect(\n    () =>\n      navigation.addListener(\"beforeRemove\", (e) => {\n        const unsaved = dirty || props.route.params.dirty;\n\n        if (!unsaved) {\n          return;\n        }\n\n        e.preventDefault();\n\n        if (Platform.OS === \"web\") {\n          // @ts-ignore\n          const leave = confirm(\n            \"You have unsaved changes. Are you sure you want to discard them and leave the screen?\"\n          );\n\n          if (leave) {\n            navigation.dispatch(e.data.action);\n          }\n        } else {\n          Alert.alert(\n            \"Discard changes?\",\n            \"You have unsaved changes. Are you sure you want to discard them and leave the screen?\",\n            [\n              { text: \"Don't leave\", style: \"cancel\", onPress: () => {} },\n              {\n                text: \"Discard\",\n                style: \"destructive\",\n                onPress: () => navigation.dispatch(e.data.action),\n              },\n            ],\n            { cancelable: false }\n          );\n        }\n      }),\n    [navigation, dirty, props.route.params.dirty]\n  );\n\n  /**\n   * Updates the Culture in place by calling `setCulture`.\n   *\n   * @param {Culture} culture to update CultureView with.\n   *\n   * HACK: As a result of how useState works it creates a new object and moves all the values over\n   * rather than something as simple as setCulture, this is because React checks differences of objects shallowly.\n   */\n  const setCultureInPlace = (culture: Culture) => {\n    const newCulture = new Culture(\n      culture.name,\n      culture.generalInsights,\n      culture.specializedInsights,\n      culture.modified\n    );\n\n    setDirty(true);\n    setCulture(newCulture);\n  };\n\n  /**\n   * Fetch culture information from Api or fallback to downloaded information\n   */\n  const fetchCulture = async (): Promise<void> => {\n    try {\n      const culture = await Culture.get(cultureName);\n      setCulture(culture);\n    } catch (err) {\n      // Offline, try reading from storage\n      try {\n        const culture = await Ledger.read(cultureName);\n        setCulture(culture);\n      } catch (err) {\n        console.error(err);\n        if (!token) {\n          // TODO: Display Magical Unicorn Culture\n          props.navigation.navigate(\"Home\");\n        } else {\n          setBanner(true);\n          setEditing(true);\n          setCulture(new Culture(cultureName, [], new Map(), Date.now()));\n        }\n      }\n    }\n  };\n\n  /**\n   * Update a culture's information in the Api\n   */\n  const updateCulture = async (): Promise<void> => {\n    try {\n      await culture.update(token);\n      setCultureInPlace(culture);\n      setDirty(false);\n      navigation.setParams({\n        cultureName: cultureName,\n        dirty: false,\n        prevName: props.route.params.prevName,\n      });\n\n      if (props.route.params.prevName) {\n        try {\n          await Culture.delete(props.route.params.prevName, token);\n        } catch (err) {\n          setMsg(err.toString());\n        }\n      }\n    } catch (err) {\n      // TODO: better error messages\n      //\n      // Error messages currently are cryptic ie: \"Not Enough Segments\" -- referring to JWT.\n      setMsg(err.toString());\n      console.error(err);\n    }\n    setEditing(!editing);\n  };\n\n  const hideSnackbar = () => setMsg(\"\");\n\n  if (!culture) {\n    return (\n      <ActivityIndicator animating={true} size=\"large\" style={Styles.spinner} />\n    );\n  }\n\n  /**\n   * Delete an insight from a list\n   *\n   * @param {number | [string, number]} index of insight to delete\n   */\n  const deleteInsight = (index: number | [string, number]) => {\n    if (index instanceof Array) {\n      const [key, i] = index;\n      const val = culture.specializedInsights.get(key);\n      val.splice(i, 1);\n\n      culture.specializedInsights.set(key, val);\n\n      if (val.length === 0) {\n        culture.specializedInsights.delete(key);\n      }\n    } else {\n      culture.generalInsights.splice(index, 1);\n    }\n\n    setCultureInPlace(culture);\n  };\n\n  /**\n   * Add an insight to either the General or Specialized tab\n   */\n  const addInsightOrCategory = () => {\n    switch (getFocusedRouteNameFromRoute(route) ?? \"general\") {\n      case \"general\":\n        culture.generalInsights.push(ExampleInsight);\n        break;\n      case \"specialized\":\n        culture.specializedInsights.set(\"Specialized Insight\", [\n          ExampleInsight,\n        ]);\n        break;\n    }\n\n    setCultureInPlace(culture);\n  };\n\n  /**\n   * addSpecializedInsight adds an insight to a category of SpecializedInsight\n   *\n   * @param {string} key of specializedInsight\n   */\n  const addSpecializedInsight = (key: string) => {\n    culture.specializedInsights.set(key, [\n      ...culture.specializedInsights.get(key),\n      ExampleInsight,\n    ]);\n\n    setCultureInPlace(culture);\n  };\n\n  /**\n   * Renders a InsightCard\n   *\n   * @param {GeneralInsight} insight to render\n   * @param {number | [string, number]} index of insight\n   *\n   * @returns {React.ReactElement} React Component\n   */\n  const InsightCardView = (\n    insight: GeneralInsight,\n    index: number | [string, number]\n  ): React.ReactElement => {\n    return (\n      <InsightCard\n        key={`insight-card-${index.toString()}`}\n        index={index}\n        editing={editing}\n        insight={insight}\n        onPress={(index) =>\n          props.navigation.navigate(\"EditInsight\", {\n            culture: culture,\n            index: index,\n          })\n        }\n        onDelete={deleteInsight}\n      />\n    );\n  };\n\n  return (\n    <View>\n      {token !== \"\" && (\n        <Banner\n          icon=\"alert\"\n          visible={banner}\n          actions={[{ label: \"Ok\", onPress: () => setBanner(false) }]}\n        >\n          {adminNewCultureBanner}\n        </Banner>\n      )}\n      <Tab.Navigator initialRouteName=\"general\">\n        <Tab.Screen name=\"general\">\n          {() => (\n            <Insights\n              renderItem={(row: { item: GeneralInsight; index: number }) =>\n                InsightCardView(row.item, row.index)\n              }\n              onRefresh={() => fetchCulture()}\n              insights={culture.generalInsights}\n            />\n          )}\n        </Tab.Screen>\n        <Tab.Screen name=\"specialized\">\n          {() => (\n            <Insights\n              insights={Array.from(culture.specializedInsights.entries())}\n              onRefresh={() => fetchCulture()}\n              renderItem={(row: {\n                item: [string, GeneralInsight[]];\n                index: number;\n              }) => {\n                const [title, insights] = row.item;\n                return (\n                  <List.Accordion title={title} id={row.index}>\n                    {insights.map((item: GeneralInsight, index: number) =>\n                      InsightCardView(item, [title, index])\n                    )}\n                    {editing && (\n                      <Button\n                        icon=\"plus\"\n                        onPress={() => addSpecializedInsight(title)}\n                        mode=\"contained\"\n                        style={Styles.specialAddInsight}\n                      >\n                        {\"\"}\n                      </Button>\n                    )}\n                  </List.Accordion>\n                );\n              }}\n            />\n          )}\n        </Tab.Screen>\n      </Tab.Navigator>\n      {token !== \"\" && (\n        <View>\n          {editing ? (\n            <ToolsFAB\n              onSave={() => updateCulture()}\n              onAdd={addInsightOrCategory}\n            />\n          ) : (\n            <EditFAB onPress={() => setEditing(!editing)} />\n          )}\n        </View>\n      )}\n      <Portal>\n        <Snackbar\n          visible={msg !== \"\"}\n          onDismiss={hideSnackbar}\n          action={{\n            label: \"Hide\",\n            onPress: hideSnackbar,\n          }}\n        >\n          {msg}\n        </Snackbar>\n      </Portal>\n    </View>\n  );\n}\n\nexport default connect(\n  (\n    state: Store,\n    ownProps: {\n      navigation: StackNavigationProp<Routes, \"Culture\">;\n      route: RouteProp<Routes, \"Culture\">;\n    }\n  ) => ({\n    token: state.user.token,\n    navigation: ownProps.navigation,\n    route: ownProps.route,\n  }),\n  null\n)(CultureView);\n","import Culture from \"./Culture\";\n\nexport default Culture;\n","import { Admin } from \"../lib\";\nimport { Store } from \".\";\n\nexport const USER_INITIAL_STATE = { user: { ...new Admin(\"\", \"\") }, token: \"\" };\n\nexport const userReducer = (\n  state = USER_INITIAL_STATE,\n  action: { type: string; payload: Store[\"user\"] }\n) => {\n  switch (action.type) {\n    case \"UPDATE_USER\":\n      return { ...action.payload };\n    case \"RESET_USER\":\n      return { ...USER_INITIAL_STATE };\n    default:\n      return state;\n  }\n};\n","import { Store } from \".\";\n\nexport const updateUser = (user: Store[\"user\"]) => ({\n  type: \"UPDATE_USER\",\n  payload: user,\n});\n\nexport const resetUser = () => ({\n  type: \"RESET_USER\",\n  payload: {},\n});\n","import { Store } from \".\";\n\nexport const updateTheme = (theme: Store[\"theme\"]) => ({\n  type: \"UPDATE_THEME\",\n  payload: theme,\n});\n","import { combineReducers } from \"redux\";\n\nimport { USER_INITIAL_STATE, userReducer } from \"./UserReducer\";\nimport { THEME_INITIAL_STATE, themeReducer } from \"./ThemeReducer\";\nimport { updateUser, resetUser } from \"./UserAction\";\nimport { updateTheme } from \"./ThemeAction\";\n\nimport { ThemeType } from \"../theme\";\n\nexport const Reducer = combineReducers({\n  theme: themeReducer,\n  user: userReducer,\n});\n\nexport type Store = {\n  user: {\n    user: { name: string; email: string; superUser: boolean };\n    token: string;\n  };\n  theme: ThemeType;\n};\n\nexport {\n  USER_INITIAL_STATE,\n  THEME_INITIAL_STATE,\n  updateUser,\n  resetUser,\n  updateTheme,\n};\n","import { ThemeType } from \"../theme\";\n\nexport const THEME_INITIAL_STATE = \"Dark\";\n\nexport const themeReducer = (\n  state = THEME_INITIAL_STATE,\n  action: { type: string; payload: ThemeType }\n) => {\n  switch (action.type) {\n    case \"UPDATE_THEME\":\n      return action.payload;\n    default:\n      return state;\n  }\n};\n","import * as Yup from \"yup\";\n\n/**\n * Login Validation Schema, a Yup Schema for basic validation for Login\n * performs basic validation.\n */\nexport default Yup.object().shape({\n  // Email must be provided and be a valid email.\n  email: Yup.string().email(\"Invalid email address\").required(\"Required\"),\n  // Password must be provided\n  password: Yup.string().required(\"Required\"),\n});\n","import React, { useState, useRef, useEffect } from \"react\";\nimport { View, StyleSheet } from \"react-native\";\n\nimport {\n  Button,\n  TextInput,\n  HelperText,\n  Snackbar,\n  Checkbox,\n} from \"react-native-paper\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators, Dispatch } from \"redux\";\nimport { StackNavigationProp } from \"@react-navigation/stack\";\nimport { CommonActions } from \"@react-navigation/native\";\nimport { RouteProp } from \"@react-navigation/native\";\nimport { useFormik } from \"formik\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\n\nimport { Admin, AuthPayload } from \"../../lib\";\nimport { updateUser, Store } from \"../../redux\";\nimport { Routes } from \"../../routes\";\nimport Validation from \"./validation\";\n\ntype Props = {\n  navigation: StackNavigationProp<Routes, \"Login\">;\n  route: RouteProp<Routes, \"Login\">;\n  updateUser: (user: Store[\"user\"]) => void;\n};\n\n/**\n * Login screen fields for Formik.\n */\ntype LoginFields = {\n  email: string;\n  password: string;\n};\n\n/**\n * Initial values for Login fields for Formik.\n */\nconst initialValues: LoginFields = {\n  // This field could be updated with useEffect to enter the user's saved email address.\n  email: \"\",\n  password: \"\",\n};\n\n// Used for {@link AsyncStorage} to store a user's email\n// locally on their device.\nconst RememberedEmail = \"@rememberedEmail\";\n\nconst Styles = StyleSheet.create({\n  view: {\n    flex: 1,\n    justifyContent: \"space-evenly\",\n    margin: 15,\n    overflow: \"hidden\",\n  },\n\n  recover: {\n    position: \"absolute\",\n    bottom: 5,\n  },\n});\n\n/**\n * Screen for logging in an Admin\n *\n * @param {Props} props - properties for Login screen\n *\n * @returns {React.ReactElement} React Component\n */\nfunction Login(props: Props): React.ReactElement {\n  const [remember, setRemember] = useState(false);\n  const [msg, setMsg] = useState(\"\");\n  const [obscurePass, SetObscurePass] = useState(true);\n\n  // useRefs for Formik Validation\n  const email = useRef();\n  const password = useRef();\n\n  const {\n    values,\n    handleChange,\n    handleBlur,\n    errors,\n    touched,\n    handleSubmit,\n    setFieldValue,\n    validateField,\n  } = useFormik({\n    validationSchema: Validation,\n    initialValues: initialValues,\n    onSubmit: (values) => login(values),\n  });\n\n  useEffect(() => {\n    const getEmail = async () => {\n      const email = await AsyncStorage.getItem(RememberedEmail);\n      if (email) {\n        setFieldValue(\"email\", email);\n        setRemember(true);\n      }\n    };\n\n    getEmail();\n  }, []);\n\n  /**\n   * login performs Api Login operation.\n   *\n   * Response:\n   *   valid credentials:\n   *     1. login\n   *     2. get token\n   *     3. Save Email if user selected \"Remember Me\"\n   *     4. redirect to \"Home\"\n   *   invalid: display Snackbar\n   *\n   * @param {LoginFields} values currently stored in the form\n   */\n  const login = async (fields: LoginFields) => {\n    const { email, password } = fields;\n    const { navigation, updateUser } = props;\n\n    let res: AuthPayload;\n    try {\n      res = await Admin.login(email, password);\n    } catch (err) {\n      setMsg(err.toString());\n      return;\n    }\n\n    try {\n      if (remember) {\n        await AsyncStorage.setItem(RememberedEmail, email);\n      } else {\n        await AsyncStorage.removeItem(RememberedEmail);\n      }\n    } catch (err) {\n      console.error(\"Failed to set Remembered Email\", err);\n    }\n\n    updateUser(res);\n\n    navigation.dispatch(\n      CommonActions.reset({ index: 1, routes: [{ name: \"Home\" }] })\n    );\n  };\n\n  /**\n   * recoverAccount checks to see if the provided Email is valid\n   * if it is send recovery email. Otherwise, display Snackbar.\n   */\n  const recoverAccount = async () => {\n    await validateField(\"email\");\n    if (errors.email === undefined) {\n      try {\n        await Admin.recover(values.email);\n        setMsg(`Sent email to ${values.email}`);\n      } catch (err) {\n        console.error(\"Failed to send recovery email: \", err);\n        setMsg(err.toString());\n      }\n    } else {\n      setMsg(\"Account recovery requires a valid Email\");\n    }\n  };\n\n  return (\n    <View style={Styles.view}>\n      <View>\n        <TextInput\n          autoFocus={true}\n          textContentType=\"emailAddress\"\n          mode=\"outlined\"\n          error={errors.email && touched.email}\n          left={<TextInput.Icon name=\"email\" />}\n          label=\"email\"\n          ref={email}\n          value={values.email}\n          onBlur={handleBlur(\"email\")}\n          onChangeText={handleChange(\"email\")}\n        />\n        {errors.email && touched.email && (\n          <HelperText type=\"error\">{errors.email}</HelperText>\n        )}\n      </View>\n      <View>\n        <TextInput\n          mode=\"outlined\"\n          label=\"password\"\n          ref={password}\n          left={<TextInput.Icon name=\"lock\" />}\n          secureTextEntry={obscurePass}\n          error={errors.password && touched.password}\n          onBlur={handleBlur(\"password\")}\n          value={values.password}\n          onChangeText={handleChange(\"password\")}\n          right={\n            <TextInput.Icon\n              name={obscurePass ? \"eye\" : \"eye-off\"}\n              onPress={() => SetObscurePass(!obscurePass)}\n            />\n          }\n        />\n        {errors.password && touched.password && (\n          <HelperText type=\"error\">{errors.password}</HelperText>\n        )}\n      </View>\n      <Checkbox.Item\n        label=\"Remember me\"\n        status={remember ? \"checked\" : \"unchecked\"}\n        onPress={() => setRemember(!remember)}\n      />\n      <Button mode=\"contained\" onPress={handleSubmit}>\n        Log In\n      </Button>\n      <Button\n        style={Styles.recover}\n        mode=\"text\"\n        onPress={recoverAccount}\n        uppercase={false}\n      >\n        Trouble logging in?\n      </Button>\n      <Snackbar\n        visible={msg !== \"\"}\n        onDismiss={() => setMsg(\"\")}\n        action={{ label: \"Ok\", onPress: () => setMsg(\"\") }}\n      >\n        {msg}\n      </Snackbar>\n    </View>\n  );\n}\n\nconst mapDispatchToProps = (dispatch: Dispatch) =>\n  bindActionCreators(\n    {\n      updateUser,\n    },\n    dispatch\n  );\n\nexport default connect(null, mapDispatchToProps)(Login);\n","import Login from \"./Login\";\n\nexport default Login;\n","/**\n * HelpText to displayed when a field is focused\n * in the {@link Register} screen\n */\nexport default {\n  name:\n    \"This is how other administrators will see you. You can always change this later.\",\n  email: \"You'll need this if you ever forget your password.\",\n  password:\n    \"Strong passwords include a mix of lower case letters, uppercase letters, numbers, and special characters.\",\n  passwordConfirmation: \"Double check that you know the password.\",\n};\n","import * as Yup from \"yup\";\n\n/**\n * Register Validation Schema, a Yup Schema for basic validation\n * for Account Registration.\n */\nexport default Yup.object().shape({\n  // Name must be provided and be at least 2 characters\n  // up to 64 characters in length.\n  name: Yup.string()\n    .min(2, \"Too short\")\n    .max(64, \"Too long\")\n    .required(\"Required\"),\n  // Email must be provided and be a valid email.\n  email: Yup.string().email(\"Invalid email address\").required(\"Required\"),\n  // Password must contain a lowercase, uppercase, one number, and a special character.\n  // Be at least 8 characters long and 64 maximum.\n  password: Yup.string()\n    .required(\"Required\")\n    .min(8, \"Must be at least 8 characters\")\n    .max(64, \"Too long\")\n    .matches(\n      /^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#?&])[A-Za-z\\d@$!%*#?&]/,\n      \"Must contain at least one uppercase letter, one lowercase letter, one number and one special character\"\n    ),\n  // Password Confirmation must match Password\n  passwordConfirmation: Yup.string()\n    .required(\"Required\")\n    .oneOf([Yup.ref(\"password\"), null], \"Must match password\"),\n});\n","import React, { useState, useRef } from \"react\";\n\nimport { View, StyleSheet, Linking } from \"react-native\";\nimport {\n  Button,\n  TextInput,\n  HelperText,\n  Snackbar,\n  Text,\n} from \"react-native-paper\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators, Dispatch } from \"redux\";\nimport { StackNavigationProp } from \"@react-navigation/stack\";\nimport { CommonActions } from \"@react-navigation/native\";\nimport { RouteProp } from \"@react-navigation/native\";\nimport { useFormik } from \"formik\";\n\nimport { Admin, AuthPayload } from \"../../lib\";\nimport { updateUser, Store } from \"../../redux\";\nimport { Routes } from \"../../routes\";\nimport { TermsOfServiceURL } from \"../../constants\";\n\nimport RegisterHelpText from \"./explanationText\";\nimport Validation from \"./validation\";\n\ntype Props = {\n  navigation: StackNavigationProp<Routes, \"Register\">;\n  route: RouteProp<Routes, \"Register\">;\n  updateUser: (user: Store[\"user\"]) => void;\n};\n\n/**\n * Register screen fields for Formik.\n */\ntype RegisterFields = {\n  name: string;\n  email: string;\n  password: string;\n  passwordConfirmation: string;\n};\n\n/**\n * Initial values for Register fields for Formik.\n */\nconst initialValues: RegisterFields = {\n  name: \"\",\n  email: \"\",\n  password: \"\",\n  passwordConfirmation: \"\",\n};\n\nconst Styles = StyleSheet.create({\n  view: {\n    flex: 1,\n    justifyContent: \"space-evenly\",\n    margin: 15,\n    overflow: \"hidden\",\n  },\n  link: {\n    color: \"blue\",\n    fontWeight: \"bold\",\n  },\n});\n\ntype Focusable = \"name\" | \"email\" | \"password\" | \"passwordConfirmation\" | null;\n\n/**\n * Screen for registering an Admin\n *\n * @param {Props} props - properties for Register screen\n *\n * @returns {React.ReactElement} React Component\n */\nfunction Register(props: Props): React.ReactElement {\n  const token = props.route.params ? props.route.params.token : \"\";\n\n  const [obscurePass, SetObscurePass] = useState(true);\n  const [obscurePassConf, SetObscurePassConf] = useState(true);\n  const [msg, setMsg] = useState(\"\");\n  const [focused, setFocused] = useState<Focusable>(\"email\");\n\n  const name = useRef();\n  const email = useRef();\n  const password = useRef();\n  const passwordConfirmation = useRef();\n\n  const {\n    values,\n    handleChange,\n    handleBlur,\n    errors,\n    touched,\n    handleSubmit,\n  } = useFormik({\n    validationSchema: Validation,\n    initialValues: initialValues,\n    onSubmit: (values) => register(values),\n  });\n\n  /**\n   * Registers an Admin\n   *\n   * @param {RegisterFields} fields - input fields\n   */\n  const register = async (fields: RegisterFields) => {\n    const { name, email, password, passwordConfirmation } = fields;\n    const { navigation, updateUser } = props;\n\n    let res: AuthPayload;\n    try {\n      res = await Admin.create(\n        name,\n        email,\n        password,\n        passwordConfirmation,\n        token\n      );\n    } catch (err) {\n      setMsg(err.toString());\n      return;\n    }\n\n    updateUser(res);\n\n    navigation.dispatch(\n      CommonActions.reset({ index: 1, routes: [{ name: \"Home\" }] })\n    );\n  };\n\n  /**\n   * Helper Text displays for {@link TextInput} if the field\n   * has an error then the error is showed. If it is focused without error information about the field is shown.\n   *\n   * @param {{fieldName: Focusable}} props - name of field\n   *\n   * @returns {React.ReactElement} React Component\n   */\n  const DisplayErrOrHelp = (props: {\n    fieldName: Focusable;\n  }): React.ReactElement => {\n    const { fieldName } = props;\n\n    if (focused !== fieldName && (!errors[fieldName] || !touched[fieldName])) {\n      return null;\n    }\n\n    if (errors[fieldName] && touched[fieldName]) {\n      return <HelperText type=\"error\">{errors[fieldName]}</HelperText>;\n    } else {\n      return <HelperText type=\"info\">{RegisterHelpText[fieldName]}</HelperText>;\n    }\n  };\n\n  return (\n    <View style={Styles.view}>\n      <View>\n        <TextInput\n          autoFocus={true}\n          textContentType=\"emailAddress\"\n          onFocus={() => setFocused(\"email\")}\n          mode=\"outlined\"\n          error={errors.email && touched.email}\n          left={<TextInput.Icon name=\"email\" />}\n          label=\"email\"\n          ref={email}\n          value={values.email}\n          onChangeText={handleChange(\"email\")}\n          onBlur={handleBlur(\"email\")}\n        />\n        <DisplayErrOrHelp fieldName=\"email\" />\n      </View>\n      <View>\n        <TextInput\n          textContentType=\"name\"\n          onFocus={() => setFocused(\"name\")}\n          mode=\"outlined\"\n          error={errors.name && touched.name}\n          left={<TextInput.Icon name=\"account\" />}\n          label=\"name\"\n          ref={name}\n          value={values.name}\n          onChangeText={handleChange(\"name\")}\n          onBlur={handleBlur(\"name\")}\n        />\n        <DisplayErrOrHelp fieldName=\"name\" />\n      </View>\n      <View>\n        <TextInput\n          mode=\"outlined\"\n          label=\"password\"\n          onFocus={() => setFocused(\"password\")}\n          ref={password}\n          left={<TextInput.Icon name=\"lock\" />}\n          secureTextEntry={obscurePass}\n          error={errors.password && touched.password}\n          onBlur={handleBlur(\"password\")}\n          value={values.password}\n          onChangeText={handleChange(\"password\")}\n          right={\n            <TextInput.Icon\n              name={obscurePass ? \"eye\" : \"eye-off\"}\n              onPress={() => SetObscurePass(!obscurePass)}\n            />\n          }\n        />\n        <DisplayErrOrHelp fieldName=\"password\" />\n      </View>\n      <View>\n        <TextInput\n          mode=\"outlined\"\n          label=\"password confirmation\"\n          onFocus={() => setFocused(\"passwordConfirmation\")}\n          ref={passwordConfirmation}\n          left={<TextInput.Icon name=\"shield-lock\" />}\n          secureTextEntry={obscurePassConf}\n          error={errors.passwordConfirmation && touched.passwordConfirmation}\n          onBlur={handleBlur(\"passwordConfirmation\")}\n          value={values.passwordConfirmation}\n          onChangeText={handleChange(\"passwordConfirmation\")}\n          right={\n            <TextInput.Icon\n              name={obscurePassConf ? \"eye\" : \"eye-off\"}\n              onPress={() => SetObscurePassConf(!obscurePassConf)}\n            />\n          }\n        />\n        <DisplayErrOrHelp fieldName=\"passwordConfirmation\" />\n      </View>\n      <View>\n        <Text>\n          By clicking Register, you are indicating that you have read and\n          acknowledged the\n          <Text\n            onPress={() => Linking.openURL(TermsOfServiceURL)}\n            style={Styles.link}\n          >\n            {\" \"}\n            Terms of Service\n          </Text>\n          .\n        </Text>\n      </View>\n      <Button mode=\"contained\" onPress={handleSubmit}>\n        Register\n      </Button>\n      <Snackbar\n        visible={msg !== \"\"}\n        onDismiss={() => setMsg(\"\")}\n        action={{ label: \"Ok\", onPress: () => setMsg(\"\") }}\n      >\n        {msg}\n      </Snackbar>\n    </View>\n  );\n}\n\nconst mapDispatchToProps = (dispatch: Dispatch) =>\n  bindActionCreators(\n    {\n      updateUser,\n    },\n    dispatch\n  );\n\nexport default connect(null, mapDispatchToProps)(Register);\n","import Register from \"./Register\";\n\nexport default Register;\n","export const TermsOfServiceURL = \"http://www.google.com\";\n\nexport const disclaimerURL = \"http://www.google.com\";\n","import { StyleSheet } from \"react-native\";\n\nexport default StyleSheet.create({\n  spinner: { top: \"50%\", position: \"relative\" },\n\n  view: {\n    flex: 1,\n  },\n\n  inviteModal: {\n    padding: 20,\n    backgroundColor: \"white\",\n  },\n\n  list: {\n    flex: 1,\n  },\n});\n","import React from \"react\";\nimport { View, FlatList } from \"react-native\";\nimport { StackNavigationProp } from \"@react-navigation/stack\";\nimport { ActivityIndicator, List, IconButton } from \"react-native-paper\";\n\nimport { Routes } from \"../../routes\";\n\nimport { Culture, Ledger } from \"../../lib\";\n\nimport styles from \"./styles\";\n\n/**\n * Properties for {@link Cultures}\n */\ntype CultureProps = {\n  navigation: StackNavigationProp<Routes, \"Home\">;\n  token: string;\n  cultures: Culture[];\n  onRefresh: () => void;\n};\n\n/**\n * Component that displays a list of components of either {@link Cultures}\n *\n * @param {CultureProps} props\n * @returns {React.ReactElement} React component\n */\nexport default function Cultures(props: CultureProps): React.ReactElement {\n  const { cultures, onRefresh, token } = props;\n\n  if (!cultures) {\n    return (\n      <ActivityIndicator animating={true} size=\"large\" style={styles.spinner} />\n    );\n  }\n\n  const deleteCulture = async (culture: Culture) => {\n    try {\n      await Culture.delete(culture.name, token);\n    } catch (err) {\n      console.error(\"Failed to delete culture\", err);\n    }\n    onRefresh();\n  };\n\n  return (\n    <View>\n      <FlatList\n        data={cultures}\n        keyExtractor={(_, index) => index.toString()}\n        renderItem={({ item }) => {\n          return (\n            <List.Item\n              title={item.name}\n              onPress={() =>\n                props.navigation.navigate(\"Culture\", { cultureName: item.name })\n              }\n              right={() => (\n                <View\n                  style={{\n                    flex: 1,\n                    flexDirection: \"row\",\n                    justifyContent: \"flex-end\",\n                  }}\n                >\n                  <IconButton\n                    icon=\"download\"\n                    onPress={() => Ledger.add(item.name)}\n                  />\n                  {token !== \"\" && (\n                    <IconButton\n                      icon=\"delete\"\n                      onPress={() => deleteCulture(item)}\n                    />\n                  )}\n                </View>\n              )}\n            />\n          );\n        }}\n      />\n    </View>\n  );\n}\n","import React from \"react\";\nimport { FlatList, Alert, View } from \"react-native\";\n\nimport { List, IconButton } from \"react-native-paper\";\n\nimport { Admin } from \"../../lib\";\n\n/**\n * Properties for {@link Admins}\n */\ntype AdminProps = {\n  token: string;\n  admins: Admin[];\n  // Refresh admins\n  onRefresh: () => void;\n};\n\n/**\n * Component that displays a list of components of {@link Admin}\n *\n * @param {AdminProps} props\n * @returns {React.ReactElement} React component\n */\nexport default function Admins(props: AdminProps): React.ReactElement {\n  const { token, admins, onRefresh } = props;\n\n  const onDelete = async (email: string) => {\n    try {\n      await Admin.delete(email, token);\n    } catch {\n      // show error message\n    }\n    onRefresh();\n  };\n\n  const onEdit = (user: {\n    email: string;\n    name: string;\n    superUser: boolean;\n  }) => {\n    //TODO: update Admin.update() params\n    try {\n      //Admin.update(email, token)\n      onRefresh();\n    } catch {\n      // show error message\n    }\n  };\n\n  return (\n    <View>\n      <FlatList\n        style={{ flex: 1 }}\n        data={admins}\n        keyExtractor={(_, index) => index.toString()}\n        renderItem={({ item }) => {\n          return (\n            <List.Item\n              title={item.email}\n              onPress={() => {\n                Alert.alert(\"user pressed\", item.name, [\n                  { text: \"OK\", onPress: () => console.log(\"OK Pressed\") },\n                ]);\n              }}\n              right={() =>\n                props.token !== \"\" && (\n                  <View style={{ flexDirection: \"row\" }}>\n                    <IconButton icon=\"pencil\" onPress={() => onEdit(item)} />\n                    <IconButton\n                      icon=\"delete\"\n                      onPress={() => onDelete(item.email)}\n                    />\n                  </View>\n                )\n              }\n            />\n          );\n        }}\n      />\n    </View>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport { View, Platform, useWindowDimensions } from \"react-native\";\n\nimport { connect } from \"react-redux\";\nimport { StackNavigationProp } from \"@react-navigation/stack\";\nimport { RouteProp } from \"@react-navigation/native\";\nimport { createMaterialTopTabNavigator } from \"@react-navigation/material-top-tabs\";\nimport { getFocusedRouteNameFromRoute } from \"@react-navigation/native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport {\n  FAB,\n  Portal,\n  Modal,\n  Text,\n  ActivityIndicator,\n} from \"react-native-paper\";\n\nimport { Store } from \"../../redux\";\nimport { Admin, Culture } from \"../../lib\";\nimport { Routes } from \"../../routes\";\n\nimport Cultures from \"./Cultures\";\nimport Admins from \"./Admins\";\nimport styles from \"./styles\";\n\ntype Props = {\n  navigation: StackNavigationProp<Routes, \"Home\">;\n  route: RouteProp<Routes, \"Home\">;\n  user: Admin;\n  token: string;\n};\n\ntype TabProps = {\n  Cultures: { cultures: Culture[] };\n  Admins: { admins: Admin[] };\n};\n\nconst Tab = createMaterialTopTabNavigator<TabProps>();\n\nfunction Home(props: Props): React.ReactElement {\n  const { token, route, navigation, user } = props;\n\n  const [cultures, setCultures] = useState(null);\n  const [admins, setAdmins] = useState(null);\n  const [inviteModal, setInviteModal] = useState(false);\n  const window = useWindowDimensions();\n  const safeArea = useSafeAreaInsets();\n\n  const fetchCultures = async () => {\n    let cultureNames = await Culture.list();\n    setCultures(cultureNames);\n  };\n\n  useEffect(() => {\n    fetchCultures();\n  }, []);\n\n  const fetchAdmins = async () => {\n    if (!props.token) {\n      return;\n    }\n\n    const admins = user.superUser ? await Admin.list(token) : [user];\n    setAdmins(admins);\n  };\n\n  useEffect(() => {\n    fetchAdmins();\n  }, []);\n\n  if (!token) {\n    return (\n      <Cultures\n        navigation={props.navigation}\n        token={\"\"}\n        cultures={cultures}\n        onRefresh={() => fetchCultures()}\n      />\n    );\n  }\n\n  const onAdd = () => {\n    switch (getFocusedRouteNameFromRoute(route) ?? \"Cultures\") {\n      case \"Cultures\":\n        setCultures([\n          ...cultures,\n          { name: \"New Culture\", modified: Date.now() },\n        ]);\n        break;\n      case \"Admins\":\n        setInviteModal(true);\n    }\n  };\n\n  const onInvite = async (email: string) => {\n    try {\n      await Admin.invite(email, token);\n    } catch (err) {\n      // show error message\n    }\n  };\n\n  if (!admins) {\n    return (\n      <ActivityIndicator animating={true} size=\"large\" style={styles.spinner} />\n    );\n  }\n\n  // HACK: In order to get the FAB to be positioned properly on both Web and Mobile.\n  //\n  // Web: use position: fixed.\n  // Mobile: useWindowDimensions hook, this doesn't work on Web.\n  const fabStyles = {\n    margin: 16,\n    right: 0,\n    position: Platform.OS === \"web\" ? \"fixed\" : \"absolute\",\n  };\n\n  if (Platform.OS !== \"web\") {\n    fabStyles[\"top\"] = window.height - safeArea.bottom;\n  } else {\n    fabStyles[\"bottom\"] = 0;\n  }\n\n  return (\n    <View>\n      <Tab.Navigator initialRouteName=\"Cultures\">\n        <Tab.Screen name=\"Cultures\">\n          {() => (\n            <Cultures\n              navigation={navigation}\n              token={token}\n              cultures={cultures}\n              onRefresh={() => fetchCultures()}\n            />\n          )}\n        </Tab.Screen>\n        <Tab.Screen name=\"Admins\">\n          {() => (\n            <Admins\n              token={token}\n              admins={admins}\n              onRefresh={() => fetchAdmins()}\n            />\n          )}\n        </Tab.Screen>\n      </Tab.Navigator>\n      <FAB icon=\"plus\" style={fabStyles as any} onPress={onAdd} />\n      <Portal>\n        <Modal visible={inviteModal} onDismiss={() => setInviteModal(false)}>\n          <Text>Example Modal. Click outside this area to dismiss.</Text>\n        </Modal>\n      </Portal>\n    </View>\n  );\n}\n\nexport default connect(\n  (\n    state: Store,\n    ownProps: {\n      navigation: StackNavigationProp<Routes, \"Home\">;\n      route: RouteProp<Routes, \"Home\">;\n    }\n  ) => ({\n    navigation: ownProps.navigation,\n    route: ownProps.route,\n    user: state.user.user,\n    token: state.user.token,\n  }),\n  null\n)(Home);\n","import Home from \"./Home\";\n\nexport default Home;\n","import React, { useState, useEffect } from \"react\";\nimport { StyleSheet, SafeAreaView } from \"react-native\";\n\nimport { StackNavigationProp } from \"@react-navigation/stack\";\nimport { RouteProp } from \"@react-navigation/native\";\nimport {\n  FAB,\n  TextInput,\n  Divider,\n  RadioButton,\n  Title,\n} from \"react-native-paper\";\n\nimport { GeneralInsight } from \"../../lib\";\n\nimport { Routes } from \"../../routes\";\n\ntype Props = {\n  navigation: StackNavigationProp<Routes, \"EditInsight\">;\n  route: RouteProp<Routes, \"EditInsight\">;\n};\n\nconst Styles = StyleSheet.create({\n  view: { flex: 1, justifyContent: \"space-evenly\", overflow: \"hidden\" },\n\n  fab: { position: \"absolute\", bottom: 0, right: 0, margin: 16 },\n\n  input: {\n    paddingHorizontal: 10,\n    margin: 5,\n  },\n});\n\n/**\n * EditInsight displays information for a particular insight and allows editing it.\n * Upon hitting the {@link FAB} it will bring the user back to {@Link CultureView}\n * in order to save the changes to the database.\n *\n * Admin:\n *   Admin ONLY screen\n *\n * @param {Props} props: properties to pass to {@link EditInsight}\n *\n * @returns {React.ReactElement} React Element\n */\nexport default function EditInsight(props: Props): React.ReactElement {\n  const index = props.route.params.index;\n  let { culture } = props.route.params;\n\n  const isSpecialized: boolean = index instanceof Array;\n\n  const insight: GeneralInsight =\n    index instanceof Array\n      ? culture.specializedInsights.get(index[0])[index[1]]\n      : culture.generalInsights[index];\n  const category: string = index instanceof Array ? index[0] : \"\";\n\n  useEffect(() => props.navigation.setOptions({ title: insight.summary }), []);\n\n  const [title, setTitle] = useState<string>(category);\n  const [summary, setSummary] = useState<string>(insight.summary);\n  const [info, setInfo] = useState<string>(insight.information);\n  const [srcData, setSrcData] = useState<string>(insight.source.data);\n  const [srcType, setSrcType] = useState<string>(insight.source.type);\n  const [cultureName, setCultureName] = useState<string>(culture.name);\n\n  /**\n   * updateCulture updates the Culture's insight for either Specialized or General\n   * screens.\n   */\n  const updateCulture = () => {\n    const newInsight = {\n      summary: summary,\n      information: info,\n      source: {\n        data: srcData,\n        type: srcType,\n      },\n    };\n\n    if (index instanceof Array) {\n      const [key, i] = index;\n\n      let specialized = culture.specializedInsights.get(key);\n      specialized[i] = newInsight;\n\n      if (title !== index[0]) {\n        culture.specializedInsights.delete(key);\n        culture.specializedInsights.set(title, specialized);\n      }\n    } else {\n      culture.generalInsights[index] = newInsight;\n    }\n\n    // set dirty if any changes have been made.\n    const prevName = culture.name;\n    const dirty =\n      category !== title ||\n      summary !== insight.summary ||\n      info !== insight.information ||\n      srcData !== insight.source.data ||\n      srcType !== insight.source.type ||\n      cultureName !== prevName;\n\n    culture.name = cultureName;\n\n    props.navigation.navigate(\"Culture\", {\n      cultureName: culture.name,\n      prevName: prevName,\n      dirty: dirty,\n    });\n  };\n\n  return (\n    <SafeAreaView style={Styles.view}>\n      <TextInput\n        style={Styles.input}\n        value={cultureName}\n        placeholder=\"Culture Name\"\n        label=\"Culture Name\"\n        mode=\"outlined\"\n        onChangeText={(text) => setCultureName(text)}\n      />\n      {isSpecialized && (\n        <TextInput\n          style={Styles.input}\n          value={title}\n          placeholder=\"Title\"\n          label=\"Title\"\n          mode=\"outlined\"\n          onChangeText={(text) => setTitle(text)}\n        />\n      )}\n      {isSpecialized && <Divider />}\n      <TextInput\n        style={Styles.input}\n        value={summary}\n        placeholder=\"Summary\"\n        label=\"Summary\"\n        mode=\"outlined\"\n        left={<TextInput.Icon name=\"text-short\" />}\n        onChangeText={(text) => setSummary(text)}\n      />\n      <TextInput\n        style={Styles.input}\n        value={info}\n        mode=\"outlined\"\n        placeholder=\"Description\"\n        label=\"Description\"\n        left={<TextInput.Icon name=\"text-subject\" />}\n        numberOfLines={5}\n        onChangeText={(text) => setInfo(text)}\n        multiline={true}\n      />\n      <Divider />\n      <Title style={{ margin: 10 }}>Source Type</Title>\n      <RadioButton.Group\n        onValueChange={(value) => setSrcType(value)}\n        value={srcType}\n      >\n        <RadioButton.Item label=\"Link\" value=\"link\" />\n      </RadioButton.Group>\n      <Divider />\n      <TextInput\n        style={Styles.input}\n        value={srcData}\n        label=\"Source\"\n        placeholder=\"Source Information\"\n        left={<TextInput.Icon name=\"book\" />}\n        mode=\"outlined\"\n        onChangeText={(text) => setSrcData(text)}\n      />\n      <FAB style={Styles.fab} icon=\"check\" onPress={updateCulture} />\n    </SafeAreaView>\n  );\n}\n","import EditInsight from \"./EditInsight\";\n\nexport default EditInsight;\n","import * as Yup from \"yup\";\n\nexport default Yup.object().shape({\n  // Password must contain a lowercase, uppercase, one number, and a special character.\n  // Be at least 8 characters long and 64 maximum.\n  password: Yup.string()\n    .required(\"Required\")\n    .min(8, \"Must be at least 8 characters\")\n    .max(64, \"Too long\")\n    .matches(\n      /^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#?&])[A-Za-z\\d@$!%*#?&]/,\n      \"Must contain at least one uppercase letter, one lowercase letter, one number and one special character\"\n    ),\n  // Password Confirmation must match Password\n  passwordConfirmation: Yup.string()\n    .required(\"Required\")\n    .oneOf([Yup.ref(\"password\"), null], \"Must match password\"),\n});\n","import React, { useState, useRef } from \"react\";\nimport { View, StyleSheet } from \"react-native\";\n\nimport { StackNavigationProp } from \"@react-navigation/stack\";\nimport { RouteProp } from \"@react-navigation/native\";\nimport { useFormik } from \"formik\";\nimport {\n  Title,\n  Button,\n  TextInput,\n  Snackbar,\n  HelperText,\n} from \"react-native-paper\";\n\nimport { Routes } from \"../../routes\";\nimport { Admin } from \"../../lib\";\nimport Validation from \"./validation\";\n\ntype Props = {\n  navigation: StackNavigationProp<Routes, \"Recovery\">;\n  route: RouteProp<Routes, \"Recovery\">;\n};\n\n/**\n * Recovery screen fields for Formik.\n */\ntype RecoveryFields = {\n  password: string;\n  passwordConfirmation: string;\n};\n\n/**\n * Initial values for Recovery fields for Formik.\n */\nconst initialValues: RecoveryFields = {\n  password: \"\",\n  passwordConfirmation: \"\",\n};\n\nconst Styles = StyleSheet.create({\n  view: { flex: 1, justifyContent: \"space-evenly\", overflow: \"hidden\" },\n\n  input: { margin: 5, padding: 15 },\n\n  title: { alignSelf: \"center\" },\n});\n\n/**\n * Recovery page for Admin account Recovery.\n *\n * @remark ONLY accessible from Email, navigating to this route normally should\n * never happen.\n *\n * @param {Props} props properties\n * @returns {React.ReactElement} React Component\n */\nexport default function Recovery(props: Props): React.ReactElement {\n  const { route, navigation } = props;\n  const email = route.params ? route.params.email : \"\";\n  const token = route.params ? route.params.token : \"\";\n\n  const [msg, setMsg] = useState(\"\");\n  const [obscurePass, SetObscurePass] = useState(true);\n  const [obscurePassConf, SetObscurePassConf] = useState(true);\n\n  // useRefs for Formik Validation\n  const password = useRef();\n  const passwordConfirmation = useRef();\n\n  const {\n    values,\n    handleChange,\n    handleBlur,\n    errors,\n    touched,\n    handleSubmit,\n  } = useFormik({\n    validationSchema: Validation,\n    initialValues: initialValues,\n    onSubmit: (values) => updateAccount(values),\n  });\n\n  const updateAccount = async (values: RecoveryFields) => {\n    try {\n      await Admin.updatePassword(\n        email,\n        values.password,\n        values.passwordConfirmation,\n        token\n      );\n      navigation.navigate(\"Login\");\n    } catch (err) {\n      setMsg(err.toString());\n      console.error(\"Failed to update account: \", err);\n    }\n  };\n\n  return (\n    <View style={Styles.view}>\n      <Title style={Styles.title}>Let's create a new password!</Title>\n      <View style={Styles.input}>\n        <TextInput\n          mode=\"outlined\"\n          label=\"password\"\n          ref={password}\n          left={<TextInput.Icon name=\"lock\" />}\n          secureTextEntry={obscurePass}\n          error={errors.password && touched.password}\n          onBlur={handleBlur(\"password\")}\n          value={values.password}\n          onChangeText={handleChange(\"password\")}\n          right={\n            <TextInput.Icon\n              name={obscurePass ? \"eye\" : \"eye-off\"}\n              onPress={() => SetObscurePass(!obscurePass)}\n            />\n          }\n        />\n        {errors.password && touched.password && (\n          <HelperText type=\"error\">{errors.password}</HelperText>\n        )}\n      </View>\n      <View style={Styles.input}>\n        <TextInput\n          mode=\"outlined\"\n          label=\"password confirmation\"\n          ref={passwordConfirmation}\n          left={<TextInput.Icon name=\"shield-lock\" />}\n          secureTextEntry={obscurePassConf}\n          error={errors.passwordConfirmation && touched.passwordConfirmation}\n          onBlur={handleBlur(\"passwordConfirmation\")}\n          value={values.passwordConfirmation}\n          onChangeText={handleChange(\"passwordConfirmation\")}\n          right={\n            <TextInput.Icon\n              name={obscurePassConf ? \"eye\" : \"eye-off\"}\n              onPress={() => SetObscurePassConf(!obscurePassConf)}\n            />\n          }\n        />\n        {errors.passwordConfirmation && touched.passwordConfirmation && (\n          <HelperText type=\"error\">{errors.passwordConfirmation}</HelperText>\n        )}\n      </View>\n      <Button mode=\"contained\" onPress={handleSubmit}>\n        Recover\n      </Button>\n      <Snackbar\n        visible={msg !== \"\"}\n        onDismiss={() => setMsg(\"\")}\n        action={{ label: \"Ok\", onPress: () => setMsg(\"\") }}\n      >\n        {msg}\n      </Snackbar>\n    </View>\n  );\n}\n","import Recovery from \"./Recovery\";\n\nexport default Recovery;\n","import { DefaultTheme, DarkTheme } from \"react-native-paper\";\n\nexport const lightTheme = {\n  ...DefaultTheme,\n  roundness: 2,\n  colors: {\n    ...DefaultTheme.colors,\n    primary: \"#1e88e5\",\n    accent: \"#1e88e5\",\n  },\n};\n\nexport const darkTheme = {\n  ...DarkTheme,\n  roundness: 2,\n  colors: {\n    ...DarkTheme.colors,\n    primary: \"#1e88e5\",\n    accent: \"#1e88e5\",\n  },\n};\n\nexport type ThemeType = \"Dark\" | \"Light\";\n\n// Location for {@link AsyncStorage} to store theme\n// \"Light\" or \"Dark\"\nexport const ThemeStorage = \"@theme\";\n","import React, { useEffect } from \"react\";\nimport { View } from \"react-native\";\n\nimport { Checkbox, List, IconButton } from \"react-native-paper\";\nimport { bindActionCreators, Dispatch } from \"redux\";\nimport { connect } from \"react-redux\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\n\nimport { Store, updateTheme } from \"../../redux\";\nimport { ThemeStorage, ThemeType } from \"../../theme\";\n\ntype Props = {\n  updateTheme: (type: ThemeType) => void;\n  theme: ThemeType;\n};\n\n/**\n * ThemeToggler toggle between Dark and Light Theme\n * when changed updates the Redux store and saves it to local storage.\n *\n * @param {Props} props\n *\n * @returns {React.ReactElement}\n */\nfunction ThemeToggler(props: Props): React.ReactElement {\n  const { updateTheme, theme } = props;\n\n  useEffect(() => {\n    const getTheme = async () => {\n      let theme: ThemeType;\n      try {\n        theme = (await AsyncStorage.getItem(ThemeStorage)) as ThemeType;\n      } catch (err) {\n        theme = \"Light\";\n      }\n\n      if (!theme) {\n        theme = \"Light\";\n      }\n\n      updateTheme(theme);\n    };\n\n    getTheme();\n  }, []);\n\n  const handleChange = async () => {\n    const newTheme = theme === \"Dark\" ? \"Light\" : \"Dark\";\n    updateTheme(newTheme);\n    try {\n      await AsyncStorage.setItem(ThemeStorage, newTheme);\n    } catch (err) {\n      console.log(\"failed to set theme\");\n    }\n  };\n\n  return (\n    <View>\n      <List.Item\n        title=\"Dark Theme\"\n        onPress={handleChange}\n        left={(props) => (\n          <IconButton {...props} icon=\"brightness-6\" onPress={handleChange} />\n        )}\n        right={(props) => (\n          <Checkbox\n            onPress={handleChange}\n            {...props}\n            status={theme === \"Dark\" ? \"checked\" : \"unchecked\"}\n          />\n        )}\n      />\n    </View>\n  );\n}\n\nconst mapDispatchToProps = (dispatch: Dispatch) =>\n  bindActionCreators(\n    {\n      updateTheme,\n    },\n    dispatch\n  );\n\nexport default connect(\n  (state: Store) => ({ theme: state.theme }),\n  mapDispatchToProps\n)(ThemeToggler);\n","import React, { useState, useEffect } from \"react\";\nimport { View, FlatList, StyleSheet } from \"react-native\";\n\nimport { List, Button, IconButton } from \"react-native-paper\";\n// is importing Dayjs really worth it for something as simple as relative times?\n// Not sure, but it's the easiest thing to do and is well maintained.\nimport dayjs from \"dayjs\";\nimport relativeTime from \"dayjs/plugin/relativeTime\";\n\nimport { Ledger } from \"../../lib\";\n\nconst Styles = StyleSheet.create({\n  // HACK: This is so that icons line up with other icons on the\n  // Settings page.\n  leftIcon: {\n    left: -5,\n  },\n});\n\ndayjs.extend(relativeTime);\n\ntype Props = {\n  // Callback fired when \"Update All\" is pressed.\n  onUpdateFinish: (err: string | null) => void;\n};\n\n/**\n * DownloadedCultures displays downloaded Cultures, allowing users to update all of them\n * or delete individual ones.\n *\n * @returns {React.ReactElement}\n */\nexport default function DownloadedCultures(props: Props): React.ReactElement {\n  const [expanded, setExpanded] = useState(false);\n  const [ledger, setLedger] = useState<Map<string, number>>(new Map());\n\n  const fetchLedger = async () => {\n    let ledger: Map<string, number>;\n    try {\n      ledger = await Ledger.list();\n    } catch (err) {\n      console.error(\"Failed to load ledger\", err);\n      return;\n    }\n\n    if (!ledger) {\n      return;\n    }\n\n    setLedger(ledger);\n  };\n\n  useEffect(() => {\n    fetchLedger();\n  }, []);\n\n  useEffect(() => {\n    const timer = setInterval(() => {\n      setLedger(new Map(ledger.entries()));\n    }, 60000);\n    return () => clearInterval(timer);\n  });\n\n  const ledgerArray = Array.from(ledger.entries());\n\n  const DownloadedCulture = (props: { item: [string, number] }) => {\n    const { item } = props;\n    const [name, modified] = item;\n\n    const remove = async (name: string) => {\n      ledger.delete(name);\n\n      try {\n        await Ledger.remove(name);\n      } catch (err) {\n        console.error(\"Failed to remove downloaded culture: \", err);\n        return;\n      }\n\n      setLedger(new Map(ledger.entries()));\n    };\n\n    return (\n      <List.Item\n        title={name}\n        description={`Last modified ${dayjs().to(dayjs.unix(modified))}`}\n        right={(props) => (\n          <IconButton {...props} icon=\"delete\" onPress={() => remove(name)} />\n        )}\n      />\n    );\n  };\n\n  const update = async () => {\n    try {\n      await Ledger.update();\n      fetchLedger();\n      props.onUpdateFinish(null);\n    } catch (err) {\n      props.onUpdateFinish(err.toString());\n      console.error(\"Failed to update downloaded cultures: \", err);\n    }\n  };\n\n  if (ledger.size === 0) {\n    return null;\n  }\n\n  return (\n    <View>\n      <List.Accordion\n        expanded={expanded}\n        onPress={() => setExpanded(!expanded)}\n        title=\"Downloaded Cultures\"\n        left={(props) => (\n          <List.Icon {...props} icon=\"download\" style={Styles.leftIcon} />\n        )}\n      >\n        <FlatList\n          data={ledgerArray}\n          keyExtractor={(_, index: number) => index.toString()}\n          renderItem={DownloadedCulture}\n        />\n      </List.Accordion>\n      {expanded && (\n        <Button mode=\"contained\" onPress={() => update()}>\n          Update All\n        </Button>\n      )}\n    </View>\n  );\n}\n","import React, { useState } from \"react\";\nimport { View, StyleSheet } from \"react-native\";\n\nimport { List, TextInput, Text, Button } from \"react-native-paper\";\n\nimport { Feedback as FeedbackSender } from \"../../lib\";\n\nconst Styles = StyleSheet.create({\n  leftIcon: {\n    left: -5,\n  },\n\n  input: {\n    padding: 20,\n  },\n\n  characterCounter: {\n    fontSize: 11,\n    right: 22,\n    position: \"absolute\",\n    bottom: 20,\n    paddingRight: 2,\n    paddingBottom: 2,\n  },\n\n  button: {\n    padding: 15,\n    margin: 10,\n  },\n});\n\nconst characterLimit = 300;\n\ntype state = \"sending\" | \"sent\" | \"failed\" | \"writing\";\n\nexport default function Feedback(): React.ReactElement {\n  const [expanded, setExpanded] = useState(false);\n  const [feedback, setFeedback] = useState(\"\");\n  const [state, setState] = useState<state>(\"writing\");\n\n  const handleInput = (text: string) => {\n    if (text.length > characterLimit) {\n      return;\n    }\n\n    setFeedback(text);\n  };\n\n  const sendFeedback = async () => {\n    if (feedback === \"\") {\n      return;\n    }\n\n    setState(\"sending\");\n    try {\n      await FeedbackSender.send(feedback);\n    } catch (err) {\n      setState(\"failed\");\n      return;\n    }\n\n    setState(\"sent\");\n  };\n\n  const reset = () => {\n    setState(\"writing\");\n    setFeedback(\"\");\n  };\n\n  return (\n    <View>\n      <List.Accordion\n        left={(props) => (\n          <List.Icon\n            {...props}\n            style={Styles.leftIcon}\n            icon=\"message-reply-text\"\n          />\n        )}\n        expanded={expanded}\n        onPress={() => setExpanded(!expanded)}\n        title=\"Feedback\"\n      >\n        {state === \"sent\" && (\n          <Button\n            icon=\"check\"\n            color=\"green\"\n            mode=\"contained\"\n            style={Styles.button}\n            onPress={reset}\n          >\n            Thank you\n          </Button>\n        )}\n        {state === \"failed\" && (\n          <Button\n            icon=\"alert\"\n            color=\"yellow\"\n            mode=\"contained\"\n            style={Styles.button}\n            onPress={() => setState(\"writing\")}\n          >\n            Try again later\n          </Button>\n        )}\n        {(state === \"writing\" || state === \"sending\") && (\n          <TextInput\n            style={Styles.input}\n            mode=\"outlined\"\n            multiline={true}\n            label=\"Where can we improve?\"\n            value={feedback}\n            onChangeText={handleInput}\n            numberOfLines={4}\n            right={\n              state === \"writing\" ? (\n                <TextInput.Icon name=\"send\" onPress={() => sendFeedback()} />\n              ) : (\n                <TextInput.Icon name=\"check\" />\n              )\n            }\n          />\n        )}\n        {(state === \"writing\" || state === \"sending\") && (\n          <Text\n            style={Styles.characterCounter}\n          >{`${feedback.length}/${characterLimit}`}</Text>\n        )}\n      </List.Accordion>\n    </View>\n  );\n}\n","import React, { useState } from \"react\";\nimport { View, StyleSheet, Linking } from \"react-native\";\n\nimport {\n  Divider,\n  List,\n  IconButton,\n  Snackbar,\n  Portal,\n} from \"react-native-paper\";\n\nimport ThemeToggler from \"./ThemeToggler\";\nimport DownloadedCultures from \"./DownloadedCultures\";\nimport Feedback from \"./Feedback\";\nimport { disclaimerURL } from \"../../constants\";\n\n// HACK: This is so that icons line up with other icons on the\n// Settings page.\nconst Styles = StyleSheet.create({\n  rightIcon: {\n    right: -5,\n  },\n\n  leftIcon: {\n    left: -5,\n  },\n});\n\n/**\n * Settings page displays downloaded cultures, disclaimer, and dark theme toggler.\n *\n * @returns {React.ReactElement}\n */\nexport default function Settings(): React.ReactElement {\n  const openLink = () => Linking.openURL(disclaimerURL);\n  const [msg, setMsg] = useState(\"\");\n\n  return (\n    <View>\n      <ThemeToggler />\n      <Divider />\n      <List.Item\n        title=\"Disclaimer\"\n        onPress={openLink}\n        left={(props) => (\n          <IconButton\n            {...props}\n            style={Styles.leftIcon}\n            onPress={openLink}\n            icon=\"file-document-outline\"\n          />\n        )}\n        right={(props) => (\n          <IconButton\n            {...props}\n            icon=\"eye\"\n            style={Styles.rightIcon}\n            onPress={openLink}\n          />\n        )}\n      />\n      <Divider />\n      <Feedback />\n      <Divider />\n      <DownloadedCultures\n        onUpdateFinish={(err) => setMsg(err || \"Update finished\")}\n      />\n      <Portal>\n        <Snackbar\n          visible={msg !== \"\"}\n          onDismiss={() => setMsg(\"\")}\n          action={{ label: \"Ok\", onPress: () => setMsg(\"\") }}\n        >\n          {msg}\n        </Snackbar>\n      </Portal>\n    </View>\n  );\n}\n","import Settings from \"./Settings\";\n\nexport default Settings;\n","import React, { useState } from \"react\";\n\nimport { IconButton, Avatar, Button, Menu } from \"react-native-paper\";\nimport { StackNavigationProp } from \"@react-navigation/stack\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators, Dispatch } from \"redux\";\n\nimport { resetUser, Store } from \"../redux\";\nimport { Routes } from \"../routes\";\n\ntype Props = {\n  // name of Admin\n  name: string;\n  navigation: StackNavigationProp<\n    Routes,\n    \"Culture\" | \"Home\" | \"Settings\" | \"Login\" | \"Register\"\n  >;\n  // Redux action in order to reset the User\n  resetUser: () => void;\n};\n\n/**\n * RightHeaderButton right header button displays '...' if not logged in\n * and an avatar if logged in. Allows the user to navigate to Settings page or log out.\n *\n * @param {Props} props\n * @returns {React.ReactElement}\n */\nfunction RightHeaderButton(props: Props): React.ReactElement {\n  const { name, navigation, resetUser } = props;\n\n  const [menu, setMenu] = useState(false);\n\n  return (\n    <Menu\n      visible={menu}\n      onDismiss={() => setMenu(false)}\n      anchor={\n        name === \"\" ? (\n          <IconButton icon=\"dots-vertical\" onPress={() => setMenu(true)} />\n        ) : (\n          <Button onPress={() => setMenu(true)}>\n            <Avatar.Text size={32} label={name[0]} />\n          </Button>\n        )\n      }\n    >\n      <Menu.Item\n        onPress={() => {\n          navigation.navigate(\"Settings\");\n          setMenu(false);\n        }}\n        title=\"Settings\"\n      />\n      {name === \"\" ? (\n        <Menu.Item\n          title=\"Log in\"\n          onPress={() => {\n            navigation.navigate(\"Login\");\n            setMenu(false);\n          }}\n        />\n      ) : (\n        <Menu.Item\n          onPress={() => {\n            resetUser();\n            navigation.navigate(\"Home\");\n            setMenu(false);\n          }}\n          title=\"Log out\"\n        />\n      )}\n    </Menu>\n  );\n}\n\nconst mapDispatchToProps = (dispatch: Dispatch) =>\n  bindActionCreators(\n    {\n      resetUser,\n    },\n    dispatch\n  );\n\nconst HeaderButton = connect(\n  (\n    state: Store,\n    ownProps: {\n      navigation: StackNavigationProp<\n        Routes,\n        \"Culture\" | \"Home\" | \"Settings\" | \"Login\" | \"Register\"\n      >;\n    }\n  ) => ({\n    name: state.user.user.name,\n    navigation: ownProps.navigation,\n  }),\n  mapDispatchToProps\n)(RightHeaderButton);\n\nexport default ({ navigation }) => ({\n  headerRight: () => <HeaderButton navigation={navigation} />,\n});\n","import { Culture } from \"./lib\";\n\n/**\n * React Navigation Routes, for Mobile.\n *\n * Add type definitions and parameters for routes in {@link StackNavigator}\n */\nexport type Routes = {\n  /**\n   * Displays information about a culture, looking up information about that\n   * culture by provided prop {@link cultureName}.\n   *\n   * For admins it allows editing and adding information about a particular culture.\n   */\n  Culture: { cultureName: string; prevName?: string; dirty?: boolean };\n\n  /**\n   * Displays an interface to edit a {@link Culture} {@link GeneralInsight}\n   * and {@link SpecializedInsight}\n   *\n   * Admin **ONLY** route\n   */\n  EditInsight: { culture: Culture; index: number | [string, number] };\n\n  /**\n   * Displays Cultures allowing for downloads and seeing information\n   * about that culture and Admins.\n   *\n   * To see Admins must be logged in, to see others you need to\n   * be a superUser.\n   *\n   * Cultures can be deleted and edited.\n   */\n  Home: undefined;\n\n  /**\n   * Allows creation of a new admin account.\n   *\n   * @remark Route sent via email.\n   */\n  Register: { token: string };\n\n  /**\n   * Allows admin Login, Account recovery, and remembering the user's\n   * email between logins.\n   */\n  Login: undefined;\n\n  /**\n   * Allows Admin account recovery, requires the token and updates the Admin\n   * in the Api in order to update their password.\n   */\n  Recovery: { token: string; email: string };\n\n  /**\n   * Settings page displays downloaded cultures, dark theme, and disclaimer\n   * for application.\n   */\n  Settings: undefined;\n};\n\n/**\n * React Navigation links {@link Routes} to Web URLs.\n */\nexport const Linking = {\n  prefixes: [\"/\"],\n  config: {\n    screens: {\n      Home: \"/\",\n      Login: \"login\",\n      Register: \"register/:token\",\n      Recovery: \"recovery/:email/:token\",\n      Culture: {\n        path: \"culture/:cultureName\",\n        parse: {\n          cultureName: (cultureName: string) => decodeURI(cultureName),\n        },\n        screens: {\n          general: \"general\",\n          specialized: \"specialized\",\n        },\n      },\n      EditInsight: \"culture/edit/:culture/:index\",\n      Settings: \"settings\",\n    },\n  },\n};\n","import React, { useEffect } from \"react\";\n\nimport \"react-native-gesture-handler\";\nimport { SafeAreaProvider } from \"react-native-safe-area-context\";\nimport { Provider } from \"react-redux\";\nimport { createStore } from \"redux\";\nimport { Provider as PaperProvider } from \"react-native-paper\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { connect } from \"react-redux\";\n\nimport {\n  NavigationContainer,\n  DarkTheme,\n  DefaultTheme,\n} from \"@react-navigation/native\";\nimport { createStackNavigator } from \"@react-navigation/stack\";\nimport { registerRootComponent } from \"expo\";\n\nimport {\n  Home,\n  Login,\n  Culture,\n  EditInsight,\n  Register,\n  Recovery,\n  Settings,\n  Header,\n} from \"./views\";\n\nimport { Routes, Linking } from \"./routes\";\nimport { lightTheme, darkTheme, ThemeStorage, ThemeType } from \"./theme\";\nimport { Reducer, updateTheme, Store } from \"./redux\";\n\nconst store = createStore(Reducer);\n\nfunction App() {\n  useEffect(() => {\n    const getTheme = async () => {\n      let theme: ThemeType;\n      try {\n        theme = (await AsyncStorage.getItem(ThemeStorage)) as ThemeType;\n      } catch (err) {\n        theme = \"Light\";\n      }\n\n      if (!theme) {\n        theme = \"Light\";\n      }\n\n      store.dispatch(updateTheme(theme));\n    };\n\n    getTheme();\n  }, []);\n\n  return (\n    <Provider store={store}>\n      <NavigatorScreen />\n    </Provider>\n  );\n}\n\ntype NavigatorProps = {\n  theme: ThemeType;\n};\n\n/**\n * Navigator contained inside of {@link App} manages navigation and theming.\n *\n * @remark This component isn't just inside of {@link App} because it needs to connect\n * to the Redux store in order to properly re-render when a change to the theme is done.\n *\n * @param {NavigatorProps} props\n * @returns {React.ReactElement}\n */\nfunction Navigator(props: NavigatorProps): React.ReactElement {\n  const { theme } = props;\n\n  const Stack = createStackNavigator<Routes>();\n\n  return (\n    <SafeAreaProvider>\n      <NavigationContainer\n        linking={Linking}\n        theme={theme === \"Dark\" ? DarkTheme : DefaultTheme}\n      >\n        <PaperProvider theme={theme === \"Dark\" ? darkTheme : lightTheme}>\n          <Stack.Navigator initialRouteName=\"Home\">\n            <Stack.Screen name=\"Culture\" component={Culture} options={Header} />\n            <Stack.Screen name=\"Home\" component={Home} options={Header} />\n            <Stack.Screen name=\"Login\" component={Login} />\n            <Stack.Screen name=\"Register\" component={Register} />\n            <Stack.Screen name=\"EditInsight\" component={EditInsight} />\n            <Stack.Screen name=\"Settings\" component={Settings} />\n            <Stack.Screen name=\"Recovery\" component={Recovery} />\n          </Stack.Navigator>\n        </PaperProvider>\n      </NavigationContainer>\n    </SafeAreaProvider>\n  );\n}\n\nconst NavigatorScreen = connect(\n  (state: Store) => ({\n    theme: state.theme,\n  }),\n  null\n)(Navigator);\n\nexport default registerRootComponent(App);\n"],"sourceRoot":""}