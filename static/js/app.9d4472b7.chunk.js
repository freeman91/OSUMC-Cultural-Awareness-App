(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{369:function(e,t,n){e.exports=n(519)},515:function(e,t,n){e.exports=n.p+"static/media/admin_login.2babc559.png"},519:function(e,t,n){"use strict";n.r(t);n(78);var a=n(0),r=n.n(a),s=n(77),o=n(74),c=n(305),i=n(176),u=n(67),l=n(304),m=n(526),p=n(527),f=n(13),d=n.n(f),h=n(15),v=n.n(h),g=n(3),b=n(90),w=n(68),y=n(4),E=n(164),x=n(343),O=n(29),P=n(525),k=n(123),j=n(295),S=n(306),I=n(184),C=n(179),R=n(296),z=n(297),T=n(181),A=n(298),D=n(6),N=n.n(D),U=n(7),F=n.n(U),B=n(8),q=n.n(B),_=n(11),G=n.n(_),H=n(1),L=n.n(H),J=n(112),M=n.n(J),V=n(12),K=n.n(V),Y=n(86),Z=n(83);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){K()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q="https://www.osumc-cultural-awareness.com:5000/api/v1",X=W(W({},Y.a),{},{colors:W(W({},Y.a.colors),{},{primary:"#1e88e5",accent:"#1e88e5"})}),ee=Z.a().shape({email:Z.c().email("Invalid email address").required("Required"),password:Z.c().required("Required")}),te={name:"This is how other administrators will see you. You can always change this later.",email:"You'll need to verify that you own this email account.",password:"Strong passwords include a mix of lower case letters, uppercase letters, numbers, and special characters.",passwordConfirmation:"Double check you know the password"},ne=Z.a().shape({name:Z.c().min(2,"Too short").max(64,"Too long").required("Required"),email:Z.c().email("Invalid email address").required("Required"),password:Z.c().required("Required").min(8,"Must be at least 8 characters").max(64,"Too long").matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]/,"Must contain at least one uppercase letter, one lowercase letter, one number and one special character"),passwordConfirmation:Z.c().required("Required").oneOf([Z.b("password"),null],"Must match password")});function ae(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=L()(e);if(t){var r=L()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return G()(this,n)}}var re=function(e){q()(n,e);var t=ae(n);function n(e,a){var r;return N()(this,n),(r=t.call(this,e)).reason=e,r.statusCode=a,r}return n}(M()(Error)),se=function(e){q()(n,e);var t=ae(n);function n(e){var a;return N()(this,n),(a=t.call(this,"Offline: "+e)).reason=e,a}return n}(M()(Error)),oe=function(){function e(){N()(this,e)}return F()(e,null,[{key:"get",value:function(e){var t,n;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,d.a.awrap(fetch(""+Q+encodeURI(e),{method:"GET",headers:{Accept:"application/json"}}));case 3:t=a.sent,a.next=9;break;case 6:throw a.prev=6,a.t0=a.catch(0),new se(a.t0);case 9:return a.next=11,d.a.awrap(t.json());case 11:if(n=a.sent,t.ok){a.next=14;break}throw new re(n.msg,t.status);case 14:return a.abrupt("return",n);case 15:case"end":return a.stop()}}),null,null,[[0,6]],Promise)}},{key:"getAuth",value:function(e,t){var n,a;return d.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,d.a.awrap(fetch(""+Q+encodeURI(e),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer "+t}}));case 3:n=r.sent,r.next=9;break;case 6:throw r.prev=6,r.t0=r.catch(0),new se(r.t0);case 9:return r.next=11,d.a.awrap(n.json());case 11:if(a=r.sent,n.ok){r.next=14;break}throw new re(a.msg,n.status);case 14:return r.abrupt("return",a);case 15:case"end":return r.stop()}}),null,null,[[0,6]],Promise)}},{key:"put",value:function(e,t,n){var a,r;return d.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,d.a.awrap(fetch(""+Q+encodeURI(e),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+n},body:JSON.stringify(t)}));case 3:a=s.sent,s.next=9;break;case 6:throw s.prev=6,s.t0=s.catch(0),new se(s.t0);case 9:return s.next=11,d.a.awrap(a.json());case 11:if(r=s.sent,a.ok){s.next=14;break}throw new re(r.msg,a.status);case 14:return s.abrupt("return",r);case 15:case"end":return s.stop()}}),null,null,[[0,6]],Promise)}},{key:"delete",value:function(e,t){var n,a;return d.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,d.a.awrap(fetch(""+Q+encodeURI(e),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+t}}));case 3:n=r.sent,r.next=9;break;case 6:r.prev=6,r.t0=r.catch(0),new se(r.t0);case 9:return r.next=11,d.a.awrap(n.json());case 11:if(a=r.sent,n.ok){r.next=14;break}throw new re(a.msg,n.status);case 14:return r.abrupt("return",a);case 15:case"end":return r.stop()}}),null,null,[[0,6]],Promise)}},{key:"post",value:function(e,t,n){var a,r,s;return d.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return a={Accept:"application/json","Content-Type":"application/json"},void 0!==n&&(a.Authorization="Bearer "+n),o.prev=2,o.next=5,d.a.awrap(fetch(""+Q+encodeURI(e),{method:"POST",headers:a,body:JSON.stringify(t)}));case 5:r=o.sent,o.next=11;break;case 8:throw o.prev=8,o.t0=o.catch(2),new se(o.t0);case 11:return o.next=13,d.a.awrap(r.json());case 13:if(s=o.sent,r.ok){o.next=16;break}throw new re(s.msg,r.status);case 16:return o.abrupt("return",s);case 17:case"end":return o.stop()}}),null,null,[[2,8]],Promise)}}]),e}(),ce=function(){function e(t,n,a=!1){N()(this,e),this.name=t,this.email=n,this.superUser=a}return F()(e,[{key:"update",value:function(e,t,n){return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.awrap(oe.put("/admins/"+this.email,{email:this.email,name:this.name,password:e,password_confirmation:t},n));case 2:case"end":return a.stop()}}),null,this,null,Promise)}}],[{key:"get",value:function(e,t){var n;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.awrap(oe.getAuth("/admins/"+e,t));case 2:return n=a.sent,a.abrupt("return",n);case 4:case"end":return a.stop()}}),null,null,null,Promise)}},{key:"login",value:function(e,t){var n;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.awrap(oe.post("/login",{email:e,password:t}));case 2:return n=a.sent,a.abrupt("return",n);case 4:case"end":return a.stop()}}),null,null,null,Promise)}},{key:"list",value:function(e){var t;return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.a.awrap(oe.getAuth("/admins",e));case 2:return t=n.sent,n.abrupt("return",t.admins);case 4:case"end":return n.stop()}}),null,null,null,Promise)}},{key:"invite",value:function(e,t){return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.a.awrap(oe.post("/admins/invite",{email:e},t));case 2:case"end":return n.stop()}}),null,null,null,Promise)}},{key:"delete",value:function(e,t){return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.a.awrap(oe.delete("/admins/"+e,t));case 2:case"end":return n.stop()}}),null,null,null,Promise)}},{key:"create",value:function(e,t,n,a,r){var s;return d.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,d.a.awrap(oe.post("/register",{name:e,email:t,password:n,password_confirmation:a},r));case 2:return s=o.sent,o.abrupt("return",s);case 4:case"end":return o.stop()}}),null,null,null,Promise)}}]),e}();var ie,ue=function(){function e(t,n,a){N()(this,e),this.name=t,this.generalInsights=n,this.specializedInsights=a}return F()(e,[{key:"create",value:function(e){return d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.awrap(oe.post("/culture",{name:this.name,general_insights:this.generalInsights,specialized_insights:this.specializedInsights},e));case 2:case"end":return t.stop()}}),null,this,null,Promise)}},{key:"update",value:function(e){var t;return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={general_insights:this.generalInsights,specialized_insights:this.specializedInsights,name:this.name},n.next=3,d.a.awrap(oe.put("/cultures/"+this.name,t,e));case 3:case"end":return n.stop()}}),null,this,null,Promise)}}],[{key:"get",value:function(e){var t;return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.a.awrap(oe.get("/cultures/"+e));case 2:return t=n.sent,n.abrupt("return",new this(t.name,t.general_insights,t.specialized_insights));case 4:case"end":return n.stop()}}),null,this,null,Promise)}},{key:"list",value:function(){var e;return d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.awrap(oe.get("/cultures"));case 2:return e=t.sent,t.abrupt("return",e.cultures);case 4:case"end":return t.stop()}}),null,null,null,Promise)}},{key:"delete",value:function(e,t){return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.a.awrap(oe.delete("/cultures/"+e,t));case 2:case"end":return n.stop()}}),null,null,null,Promise)}}]),e}(),le=n(81),me=n(248);!function(e){function t(e){var t;return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.a.awrap(ue.get(e));case 2:return t=n.sent,n.abrupt("return",me.deflate(JSON.stringify(t),{to:"string"}));case 4:case"end":return n.stop()}}),null,null,null,Promise)}function n(){var e;return d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.awrap(le.a.getItem("@ledger"));case 2:if(null!==(e=t.sent)){t.next=5;break}return t.abrupt("return",new Map);case 5:return t.abrupt("return",JSON.parse(e).cultures);case 6:case"end":return t.stop()}}),null,null,null,Promise)}function a(e){var n;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.awrap(t(e));case 2:n=a.sent,le.a.setItem(e,n.toString());case 4:case"end":return a.stop()}}),null,null,null,Promise)}e.update=function(){var e,t,r;return d.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,d.a.awrap(ue.list());case 2:return e=s.sent,s.next=5,d.a.awrap(n());case 5:return t=s.sent,e.forEach((function(e){var n,r;return d.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:n=e.name,r=e.modified,t.has(n)&&t.get(n)<r&&a(n);case 2:case"end":return s.stop()}}),null,null,null,Promise)})),r=JSON.stringify({cultures:t}),s.next=10,d.a.awrap(le.a.setItem("@ledger",r));case 10:case"end":return s.stop()}}),null,null,null,Promise)},e.list=n,e.read=function(e){var t,n;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.awrap(le.a.getItem(e));case 2:return t=a.sent,n=me.inflate(t,{to:"string"}),a.abrupt("return",JSON.parse(n));case 5:case"end":return a.stop()}}),null,null,null,Promise)},e.add=a,e.remove=function(e){return d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.awrap(n());case 2:t.sent.has(e)&&le.a.removeItem(e);case 4:case"end":return t.stop()}}),null,null,null,Promise)}}(ie||(ie={}));var pe=Object(P.a)(),fe=g.a.create({spinner:{top:"50%",position:"relative"},fab:{},card:{padding:10,marginVertical:5,marginHorizontal:5},editInput:{width:"100%"},specialAddInsight:{padding:10,marginVertical:5,marginHorizontal:5}}),de={summary:"summary",information:"information",source:{data:"www.example.com",type:"link"}};function he(e){var t=e.insights,n=e.onRefresh,s=e.renderItem,o=Object(a.useState)(!1),c=v()(o,2),i=c[0],u=c[1];if(!t)return r.a.createElement(k.a,{animating:!0,size:"large",style:fe.spinner});var l=function(){n(),u(!0)};return r.a.createElement(w.a,null,r.a.createElement(b.a,{data:t,keyExtractor:function(e,t){return t.toString()},onRefresh:function(){return l()},refreshing:i,renderItem:s}))}function ve(e){return r.a.createElement(S.a.Group,{style:fe.fab,icon:"pencil",open:!1,onPress:function(){return e.onPress()},visible:!0,actions:[],onStateChange:function(){return e.onPress()}})}function ge(e){var t=Object(a.useState)(!1),n=v()(t,2),s=n[0],o=n[1];return r.a.createElement(S.a.Group,{visible:!0,style:fe.fab,open:s,icon:s?"close":"wrench",actions:[{icon:"plus",onPress:function(){return e.onAdd()}},{icon:"content-save",onPress:function(){return e.onSave()}}],onStateChange:function(){return o(!s)}})}function be(e){var t=e.insight,n=e.index,s=e.editing,o=e.onPress,c=Object(a.useState)(!1),i=v()(c,2),u=i[0],l=i[1],m=t.source.data;return r.a.createElement(I.a,{style:fe.card,onPress:function(){return s&&o(n)}},r.a.createElement(I.a.Content,null,r.a.createElement(C.a,null,t.summary),r.a.createElement(R.a,null,t.information)),r.a.createElement(I.a.Actions,null,m&&E.a.canOpenURL(m)&&r.a.createElement(z.a,{visible:u,onDismiss:function(){return l(!1)},anchor:r.a.createElement(T.a,{icon:"link",size:20,onPress:function(){return l(!0)}})},r.a.createElement(z.a.Item,{title:"Copy link",onPress:function(){return x.a.setString(m)}}),r.a.createElement(A.a,null),r.a.createElement(z.a.Item,{title:"Open link",onPress:function(){return E.a.openURL(m)}})),s&&r.a.createElement(T.a,{icon:"delete",size:20,onPress:function(){return e.onDelete(n)}})))}var we=Object(s.b)((function(e,t){return{token:e.user.token,navigation:t.navigation,route:t.route}}),null)((function(e){var t=e.route.params?e.route.params.cultureName:"",n=e.token||"",s=Object(a.useState)(null),o=v()(s,2),c=o[0],l=o[1],m=Object(a.useState)(!1),p=v()(m,2),f=p[0],h=p[1],g=Object(a.useState)(""),b=v()(g,2),w=b[0],E=b[1],x=Object(a.useState)(!1),P=v()(x,2),S=P[0],I=P[1],C=Object(O.useRoute)();Object(a.useEffect)((function(){return e.navigation.setOptions({title:t})}),[]),Object(a.useEffect)((function(){z()}),[]);var R=function(e){var t=new ue(e.name,e.generalInsights,e.specializedInsights);l(t)},z=function(){var n,a;return d.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,d.a.awrap(ue.get(t));case 3:n=r.sent,l(n),r.next=20;break;case 7:return r.prev=7,r.t0=r.catch(0),r.prev=9,r.next=12,d.a.awrap(ie.read(t));case 12:a=r.sent,l(a),r.next=20;break;case 16:r.prev=16,r.t1=r.catch(9),console.error(r.t1),e.navigation.navigate("Home");case 20:case"end":return r.stop()}}),null,null,[[0,7],[9,16]],Promise)},T=function(){return I(!1)};if(!c)return r.a.createElement(k.a,{animating:!0,size:"large",style:fe.spinner});var A=function(e){var t=[];for(var n in e)t.push({text:n,insights:e[n]});return t}(c.specializedInsights),D=function(e){if(e instanceof Array){var t=v()(e,2),n=t[0],a=t[1];c.specializedInsights[n].splice(a,1),0===c.specializedInsights[n].length&&delete c.specializedInsights[n]}else c.generalInsights.splice(e,1);R(c)},N=function(t,n){return r.a.createElement(be,{key:"insight-card-"+n.toString(),index:n,editing:f,insight:t,onPress:function(t){return e.navigation.navigate("EditInsight",{culture:c,index:t})},onDelete:D})};return r.a.createElement(y.a,null,r.a.createElement(pe.Navigator,{initialRouteName:"General"},r.a.createElement(pe.Screen,{name:"General"},(function(){return r.a.createElement(he,{renderItem:function(e){return N(e.item,e.index)},onRefresh:function(){return d.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z());case 1:case"end":return e.stop()}}),null,null,null,Promise)},insights:c.generalInsights})})),r.a.createElement(pe.Screen,{name:"Specialized"},(function(){return r.a.createElement(he,{insights:A,onRefresh:function(){return d.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z());case 1:case"end":return e.stop()}}),null,null,null,Promise)},renderItem:function(e){var t=e.item,n=t.text,a=t.insights;return r.a.createElement(u.b.Accordion,{title:n,id:e.index},a.map((function(e,t){return N(e,[n,t])})),f&&r.a.createElement(i.a,{icon:"plus",onPress:function(){return e=n,c.specializedInsights[e].push(de),void R(c);var e},mode:"contained",style:fe.specialAddInsight},""))}})}))),r.a.createElement(r.a.Fragment,null,n&&(f?r.a.createElement(ge,{onSave:function(){return d.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.awrap(c.update(n));case 3:R(c),e.next=11;break;case 6:e.prev=6,e.t0=e.catch(0),I(!0),E(e.t0.toString()),console.error(e.t0);case 11:h(!f);case 12:case"end":return e.stop()}}),null,null,[[0,6]],Promise)},onAdd:function(){var e;switch(null!=(e=Object(O.getFocusedRouteNameFromRoute)(C))?e:"General"){case"General":c.generalInsights.push(de);break;case"Specialized":c.specializedInsights["Specialized Insight"]=[de]}R(c)}}):r.a.createElement(ve,{onPress:function(){return h(!f)}}))),r.a.createElement(j.a,{visible:S,onDismiss:T,action:{label:"Hide",onPress:T}},w))})),ye=n(301),Ee=n(299),xe=n(303),Oe=n(210),Pe=function(e){return{type:"UPDATE_USER",payload:e}},ke={email:"",password:""},je=g.a.create({view:{flex:1,justifyContent:"space-evenly",margin:15,overflow:"hidden"},recover:{position:"absolute",bottom:5}});var Se=Object(s.b)(null,(function(e){return Object(o.a)({updateUser:Pe},e)}))((function(e){var t=Object(a.useState)(!1),n=v()(t,2),s=n[0],o=n[1],c=Object(a.useState)(!1),u=v()(c,2),l=u[0],m=u[1],p=Object(a.useState)(""),f=v()(p,2),h=f[0],g=f[1],b=Object(a.useState)(!0),w=v()(b,2),E=w[0],x=w[1],P=Object(a.useRef)(),k=Object(a.useRef)(),S=Object(Oe.a)({validationSchema:ee,initialValues:ke,onSubmit:function(e){return U(e)}}),I=S.values,C=S.handleChange,R=S.handleBlur,z=S.errors,T=S.touched,A=S.handleSubmit,D=S.setFieldValue,N=S.validateField;Object(a.useEffect)((function(){!function(){var e;d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.awrap(le.a.getItem("@rememberedEmail"));case 2:(e=t.sent)&&(D("email",e),o(!0));case 4:case"end":return t.stop()}}),null,null,null,Promise)}()}),[]);var U=function(t){var n,a,r,o,c;return d.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return n=t.email,a=t.password,r=e.navigation,o=e.updateUser,i.prev=2,i.next=5,d.a.awrap(ce.login(n,a));case 5:c=i.sent,i.next=13;break;case 8:return i.prev=8,i.t0=i.catch(2),m(!0),g(i.t0.toString()),i.abrupt("return");case 13:if(i.prev=13,!s){i.next=19;break}return i.next=17,d.a.awrap(le.a.setItem("@rememberedEmail",n));case 17:i.next=21;break;case 19:return i.next=21,d.a.awrap(le.a.removeItem("@rememberedEmail"));case 21:i.next=26;break;case 23:i.prev=23,i.t1=i.catch(13),console.error("Failed to set Remembered Email",i.t1);case 26:o(c),r.dispatch(O.CommonActions.reset({index:1,routes:[{name:"Home"}]}));case 28:case"end":return i.stop()}}),null,null,[[2,8],[13,23]],Promise)};return r.a.createElement(y.a,{style:je.view},r.a.createElement(y.a,null,r.a.createElement(ye.a,{autoFocus:!0,textContentType:"emailAddress",mode:"outlined",error:z.email&&T.email,left:r.a.createElement(ye.a.Icon,{name:"email"}),label:"email",ref:P,value:I.email,onBlur:R("email"),onChangeText:C("email")}),z.email&&T.email&&r.a.createElement(Ee.a,{type:"error"},z.email)),r.a.createElement(y.a,null,r.a.createElement(ye.a,{mode:"outlined",label:"password",ref:k,left:r.a.createElement(ye.a.Icon,{name:"lock"}),secureTextEntry:E,error:z.password&&T.password,onBlur:R("password"),value:I.password,onChangeText:C("password"),right:r.a.createElement(ye.a.Icon,{name:E?"eye":"eye-off",onPress:function(){return x(!E)}})}),z.password&&T.password&&r.a.createElement(Ee.a,{type:"error"},z.password)),r.a.createElement(xe.a.Item,{label:"Remember me",status:s?"checked":"unchecked",onPress:function(){return o(!s)}}),r.a.createElement(i.a,{mode:"contained",onPress:A},"Log In"),r.a.createElement(i.a,{style:je.recover,mode:"text",onPress:function(){return d.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.awrap(N("email"));case 2:void 0===z.email?console.log("Send recovery email to "+I.email):(m(!0),g("Account recovery requires a valid Email"));case 3:case"end":return e.stop()}}),null,null,null,Promise)},uppercase:!1},"Trouble logging in?"),r.a.createElement(j.a,{visible:l,onDismiss:function(){return m(!1)},action:{label:"Ok",onPress:function(){return m(!1)}}},h))})),Ie=n(32),Ce={name:"",email:"",password:"",passwordConfirmation:""},Re=g.a.create({view:{flex:1,justifyContent:"space-evenly",margin:15,overflow:"hidden"},link:{color:"blue",fontWeight:"bold"}});var ze=Object(s.b)(null,(function(e){return Object(o.a)({updateUser:Pe},e)}))((function(e){var t=e.route.params?e.route.params.token:"",n=Object(a.useState)(!0),s=v()(n,2),o=s[0],c=s[1],u=Object(a.useState)(!0),l=v()(u,2),m=l[0],p=l[1],f=Object(a.useState)(!1),h=v()(f,2),g=h[0],b=h[1],w=Object(a.useState)(""),x=v()(w,2),P=x[0],k=x[1],S=Object(a.useState)("email"),I=v()(S,2),C=I[0],R=I[1],z=Object(a.useRef)(),T=Object(a.useRef)(),A=Object(a.useRef)(),D=Object(a.useRef)(),N=Object(Oe.a)({validationSchema:ne,initialValues:Ce,onSubmit:function(e){return H(e)}}),U=N.values,F=N.handleChange,B=N.handleBlur,q=N.errors,_=N.touched,G=N.handleSubmit,H=function(n){var a,r,s,o,c,i,u;return d.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return a=n.name,r=n.email,s=n.password,o=n.passwordConfirmation,c=e.navigation,i=e.updateUser,l.prev=2,l.next=5,d.a.awrap(ce.create(a,r,s,o,t));case 5:u=l.sent,l.next=13;break;case 8:return l.prev=8,l.t0=l.catch(2),b(!0),k(l.t0.toString()),l.abrupt("return");case 13:i(u),c.dispatch(O.CommonActions.reset({index:1,routes:[{name:"Home"}]}));case 15:case"end":return l.stop()}}),null,null,[[2,8]],Promise)},L=function(e){var t=e.fieldName;return C===t||q[t]&&_[t]?q[t]&&_[t]?r.a.createElement(Ee.a,{type:"error"},q[t]):r.a.createElement(Ee.a,{type:"info"},te[t]):null};return r.a.createElement(y.a,{style:Re.view},r.a.createElement(y.a,null,r.a.createElement(ye.a,{autoFocus:!0,textContentType:"emailAddress",onFocus:function(){return R("email")},mode:"outlined",error:q.email&&_.email,left:r.a.createElement(ye.a.Icon,{name:"email"}),label:"email",ref:T,value:U.email,onChangeText:F("email"),onBlur:B("email")}),r.a.createElement(L,{fieldName:"email"})),r.a.createElement(y.a,null,r.a.createElement(ye.a,{textContentType:"name",onFocus:function(){return R("name")},mode:"outlined",error:q.name&&_.name,left:r.a.createElement(ye.a.Icon,{name:"account"}),label:"name",ref:z,value:U.name,onChangeText:F("name"),onBlur:B("name")}),r.a.createElement(L,{fieldName:"name"})),r.a.createElement(y.a,null,r.a.createElement(ye.a,{mode:"outlined",label:"password",onFocus:function(){return R("password")},ref:A,left:r.a.createElement(ye.a.Icon,{name:"lock"}),secureTextEntry:o,error:q.password&&_.password,onBlur:B("password"),value:U.password,onChangeText:F("password"),right:r.a.createElement(ye.a.Icon,{name:o?"eye":"eye-off",onPress:function(){return c(!o)}})}),r.a.createElement(L,{fieldName:"password"})),r.a.createElement(y.a,null,r.a.createElement(ye.a,{mode:"outlined",label:"password confirmation",onFocus:function(){return R("passwordConfirmation")},ref:D,left:r.a.createElement(ye.a.Icon,{name:"shield-lock"}),secureTextEntry:m,error:q.passwordConfirmation&&_.passwordConfirmation,onBlur:B("passwordConfirmation"),value:U.passwordConfirmation,onChangeText:F("passwordConfirmation"),right:r.a.createElement(ye.a.Icon,{name:m?"eye":"eye-off",onPress:function(){return p(!m)}})}),r.a.createElement(L,{fieldName:"passwordConfirmation"})),r.a.createElement(y.a,null,r.a.createElement(Ie.a,null,"By clicking Register, you are indicating that you have read and acknowledged the",r.a.createElement(Ie.a,{onPress:function(){return E.a.openURL("http://www.google.com")},style:Re.link}," ","Terms of Service"),".")),r.a.createElement(i.a,{mode:"contained",onPress:G},"Register"),r.a.createElement(j.a,{visible:g,onDismiss:function(){return b(!1)},action:{label:"Ok",onPress:function(){return b(!1)}}},P))})),Te=n(21),Ae=n.n(Te),De=n(40),Ne=n(140),Ue=n(52),Fe=n(344),Be=n(185),qe=n(307),_e=g.a.create({spinner:{top:"50%",position:"relative"},emptyListStyle:{padding:10,fontSize:18,textAlign:"center"},itemStyle:{padding:10},img:{padding:35,height:70,width:"25%"},headerFooterStyle:{width:"100%",height:45,backgroundColor:"#606070"},bottomFooterStyle:{flex:1,flexDirection:"row",justifyContent:"space-between",width:"100%",height:70,backgroundColor:"#606070",position:"absolute",bottom:0,left:0,right:0,marginBottom:0},textStyle:{textAlign:"center",color:"#fff",fontSize:18,padding:7},btn:{},fab:{position:"absolute",margin:16,right:0,bottom:-450},view:{height:"100%"},inviteModal:{padding:20,background:"white"}}),Ge=Object(P.a)();function He(e){var t=Object(a.useState)(null),n=v()(t,2),s=n[0],o=n[1];Object(a.useEffect)((function(){c()}),[]);var c=function(){var e;return d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.awrap(ue.list());case 2:e=t.sent,o(e);case 4:case"end":return t.stop()}}),null,null,null,Promise)};return s?r.a.createElement(w.a,null,r.a.createElement(b.a,{style:{flex:1},data:s,keyExtractor:function(e,t){return t.toString()},renderItem:function(t){var n=t.item;return r.a.createElement(u.b.Item,{title:n.name,onPress:function(){return e.navigation.navigate("Culture",{cultureName:n.name})},right:function(){return r.a.createElement(y.a,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},r.a.createElement(T.a,{icon:"download",onPress:function(){return ie.add(n.name)}}),e.token&&r.a.createElement(T.a,{icon:"delete",onPress:function(){return ue.delete(n.name,e.token)}}))}})}}),e.token&&r.a.createElement(S.a,{icon:"plus",style:_e.fab,onPress:function(){return o([].concat(Ae()(s),[""]))}})):r.a.createElement(k.a,{animating:!0,size:"large",style:_e.spinner})}function Le(e){var t=Object(a.useState)(null),n=v()(t,2),s=n[0],o=n[1],c=r.a.useState(!1),i=v()(c,2),l=i[0],m=i[1];Object(a.useEffect)((function(){p()}),[]);var p=function(){var t;return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.user.superUser){n.next=6;break}return n.next=3,d.a.awrap(ce.list(e.token));case 3:t=n.sent,n.next=7;break;case 6:t=[e.user];case 7:o(t);case 8:case"end":return n.stop()}}),null,null,null,Promise)};return s?r.a.createElement(w.a,null,r.a.createElement(b.a,{style:{flex:1},data:s,keyExtractor:function(e,t){return t.toString()},renderItem:function(t){var n=t.item;return r.a.createElement(u.b.Item,{title:n.email,onPress:function(){Fe.a.alert("user pressed",n.name,[{text:"OK",onPress:function(){return console.log("OK Pressed")}}])},right:function(){return e.token?r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{icon:"pencil",onPress:function(){return function(e){try{p()}catch(t){}}()}}),r.a.createElement(T.a,{icon:"delete",onPress:function(){return t=n.email,d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,d.a.awrap(ce.delete(t,e.token));case 3:n.next=7;break;case 5:n.prev=5,n.t0=n.catch(0);case 7:p();case 8:case"end":return n.stop()}}),null,null,[[0,5]],Promise);var t}})):null}})}}),r.a.createElement(S.a,{icon:"plus",style:_e.fab,onPress:function(){return m(!l)}}),r.a.createElement(Be.a,null,r.a.createElement(qe.a,{visible:l,contentContainerStyle:_e.inviteModal},r.a.createElement(De.a,null,"Example Modal. Click outside this area to dismiss.")))):r.a.createElement(k.a,{animating:!0,size:"large",style:_e.spinner})}var Je=Object(s.b)((function(e,t){return{navigation:t.navigation,route:t.route,user:e.user.user,token:e.user.token}}),null)((function(e){var t=e.token,a=function(t){e.navigation.navigate("Login")};return r.a.createElement(y.a,{style:_e.view},r.a.createElement(Ge.Navigator,{initialRouteName:"Cultures"},r.a.createElement(Ge.Screen,{name:"Cultures"},(function(){return r.a.createElement(He,{navigation:e.navigation,token:t})})),t?r.a.createElement(Ge.Screen,{name:"Admins"},(function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Le,{token:t,user:e.user}))})):r.a.createElement(r.a.Fragment,null)),r.a.createElement(y.a,{style:_e.bottomFooterStyle},r.a.createElement(i.a,{onPress:function(){return console.log("Pressed!")}},"General Disclaimer"),r.a.createElement(Ne.a,{style:_e.btn,onPress:a},r.a.createElement(Ue.a,{source:n(515),style:_e.img}))))})),Me=n(302),Ve=g.a.create({view:{flex:1,justifyContent:"space-evenly"},fab:{position:"absolute",bottom:0,right:0,margin:16},input:{paddingHorizontal:10,margin:5}});function Ke(e){var t=e.route.params.index,n=e.route.params.culture,s=t instanceof Array,o=t instanceof Array?n.specializedInsights[t[0]][t[1]]:n.generalInsights[t],c=t instanceof Array?t[0]:"";Object(a.useEffect)((function(){return e.navigation.setOptions({title:o.summary})}),[]);var i=Object(a.useState)(c),u=v()(i,2),l=u[0],m=u[1],p=Object(a.useState)(o.summary),f=v()(p,2),d=f[0],h=f[1],g=Object(a.useState)(o.information),b=v()(g,2),y=b[0],E=b[1],x=Object(a.useState)(o.source.data),O=v()(x,2),P=O[0],k=O[1],j=Object(a.useState)(o.source.type),I=v()(j,2),R=I[0],z=I[1];return r.a.createElement(w.a,{style:Ve.view},s&&r.a.createElement(ye.a,{style:Ve.input,value:l,placeholder:"Title",label:"Title",mode:"outlined",onChangeText:function(e){return m(e)}}),s&&r.a.createElement(A.a,null),r.a.createElement(ye.a,{style:Ve.input,value:d,placeholder:"Summary",label:"Summary",mode:"outlined",left:r.a.createElement(ye.a.Icon,{name:"text-short"}),onChangeText:function(e){return h(e)}}),r.a.createElement(ye.a,{style:Ve.input,value:y,mode:"outlined",placeholder:"Description",label:"Description",left:r.a.createElement(ye.a.Icon,{name:"text-subject"}),numberOfLines:5,onChangeText:function(e){return E(e)},multiline:!0}),r.a.createElement(A.a,null),r.a.createElement(C.a,{style:{margin:10}},"Source Type"),r.a.createElement(Me.a.Group,{onValueChange:function(e){return z(e)},value:R},r.a.createElement(Me.a.Item,{label:"Link",value:"link"})),r.a.createElement(A.a,null),r.a.createElement(ye.a,{style:Ve.input,value:P,label:"Source",placeholder:"Source Information",left:r.a.createElement(ye.a.Icon,{name:"book"}),mode:"outlined",onChangeText:function(e){return k(e)}}),r.a.createElement(S.a,{style:Ve.fab,icon:"check",onPress:function(){var a={summary:d,information:y,source:{data:P,type:R}};if(t instanceof Array){var r=v()(t,2),s=r[0],o=r[1],c=n.specializedInsights[s];c[o]=a,l!==t[0]&&(delete n.specializedInsights[s],n.specializedInsights[l]=c)}else n.generalInsights[t]=a;e.navigation.navigate("Culture",{cultureName:n.name})}}))}function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){K()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $e={user:Ze({},new ce("","")),token:""},We=Object(o.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_USER":return Ze({},t.payload);default:return e}}}),Qe=Object(o.c)(We);t.default=Object(p.a)((function(){var e=Object(m.a)();return a.createElement(c.a,{theme:X},a.createElement(s.a,{store:Qe},a.createElement(l.a,{linking:{prefixes:["/"]}},a.createElement(e.Navigator,{initialRouteName:"Home"},a.createElement(e.Screen,{name:"Culture",component:we,options:{headerRight:function(){return a.createElement(i.a,{onPress:function(){return console.log("button pressed")}},a.createElement(u.a.Text,{size:36,label:"NH"}))}}}),a.createElement(e.Screen,{name:"Home",component:Je}),a.createElement(e.Screen,{name:"Login",component:Se}),a.createElement(e.Screen,{name:"Register",component:ze}),a.createElement(e.Screen,{name:"EditInsight",component:Ke})))))}))}},[[369,1,2]]]);
//# sourceMappingURL=app.9d4472b7.chunk.js.map